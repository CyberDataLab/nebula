
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NEBULA: A Platform for Decentralized Federated Learning">
      
      
        <meta name="author" content="Enrique Tomás Martínez Beltrán, Alberto Huertas Celdrán, Alejandro Avilés Serrano, Fernando Torres Vega">
      
      
        <link rel="canonical" href="https://docs.nebula-dfl.com/api/controller/scenarios/">
      
      
        <link rel="prev" href="../http_helpers/">
      
      
        <link rel="next" href="../../core/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>scenarios - NEBULA</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/toc.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation-for-scenarios-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="NEBULA" class="md-header__button md-logo" aria-label="NEBULA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NEBULA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              scenarios
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CyberDataLab/nebula" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    CyberDataLab/nebula
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../installation/" class="md-tabs__link">
        
  
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../userguide/" class="md-tabs__link">
        
  
  
    
  
  User Guide

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../developerguide/" class="md-tabs__link">
        
  
  
    
  
  Developer Guide

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../git-workflow/" class="md-tabs__link">
        
  
  
    
  
  Git Workflow

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../commercial-faq/" class="md-tabs__link">
        
  
  
    
  
  Commercial FAQ

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="NEBULA" class="md-nav__button md-logo" aria-label="NEBULA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NEBULA
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CyberDataLab/nebula" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    CyberDataLab/nebula
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../userguide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developerguide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../git-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Workflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    nebula
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            nebula
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    addons
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1" id="__nav_6_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            addons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/attacks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    attacks
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_1" id="__nav_6_1_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_1">
            <span class="md-nav__icon md-icon"></span>
            attacks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/attacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    attacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/attacks/communications/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    communications
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_1_2" id="__nav_6_1_1_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            communications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/communications/communicationattack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    communicationattack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/communications/delayerattack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    delayerattack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/communications/floodingattack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    floodingattack
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/attacks/dataset/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    dataset
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_1_3" id="__nav_6_1_1_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_1_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_1_3">
            <span class="md-nav__icon md-icon"></span>
            dataset
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/dataset/datapoison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datapoison
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/dataset/datasetattack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datasetattack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/dataset/labelflipping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    labelflipping
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/attacks/model/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    model
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_1_4" id="__nav_6_1_1_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_1_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_1_4">
            <span class="md-nav__icon md-icon"></span>
            model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/model/gllneuroninversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gllneuroninversion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/model/modelattack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    modelattack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/model/modelpoison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    modelpoison
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/attacks/model/swappingweights/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    swappingweights
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/env/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    env
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/gps/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    gps
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_4" id="__nav_6_1_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_4">
            <span class="md-nav__icon md-icon"></span>
            gps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/gps/gpsmodule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gpsmodule
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/gps/nebulagps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebulagps
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mobility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/networksimulation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    networksimulation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_6" id="__nav_6_1_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_6">
            <span class="md-nav__icon md-icon"></span>
            networksimulation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/networksimulation/nebulanetworksimulator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebulanetworksimulator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/networksimulation/networksimulator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    networksimulator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/reporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    reporter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/reputation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    reputation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_8" id="__nav_6_1_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_8">
            <span class="md-nav__icon md-icon"></span>
            reputation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/reputation/reputation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    reputation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/topologymanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    topologymanager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../addons/trustworthiness/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    trustworthiness
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_10" id="__nav_6_1_1_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_10">
            <span class="md-nav__icon md-icon"></span>
            trustworthiness
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/calculation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    calculation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/factsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    factsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/graphics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    graphics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/metric/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    metric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/pillar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pillar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/trustworthiness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    trustworthiness
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/trustworthiness/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../addons/waf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    waf
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    controller
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1_2">
            <span class="md-nav__icon md-icon"></span>
            controller
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http_helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    http_helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    scenarios
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    scenarios
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      scenarios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scenario">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.attack_node_assign" class="md-nav__link">
    <span class="md-ellipsis">
      attack_node_assign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.mobility_assign" class="md-nav__link">
    <span class="md-ellipsis">
      mobility_assign
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement" class="md-nav__link">
    <span class="md-ellipsis">
      ScenarioManagement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ScenarioManagement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.create_topology" class="md-nav__link">
    <span class="md-ellipsis">
      create_topology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.load_configurations_and_start_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      load_configurations_and_start_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.remove_files_by_scenario" class="md-nav__link">
    <span class="md-ellipsis">
      remove_files_by_scenario
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.scenario_finished" class="md-nav__link">
    <span class="md-ellipsis">
      scenario_finished
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_docker" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_physical" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_physical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_process" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.stop_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      stop_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.stop_participants" class="md-nav__link">
    <span class="md-ellipsis">
      stop_participants
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    core
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3" id="__nav_6_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3">
            <span class="md-nav__icon md-icon"></span>
            core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/addonmanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    addonmanager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/aggregation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    aggregation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_2" id="__nav_6_1_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_2">
            <span class="md-nav__icon md-icon"></span>
            aggregation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/aggregator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    aggregator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/fedavg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fedavg
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/krum/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    krum
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/median/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    median
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/trimmedmean/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    trimmedmean
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_2_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/aggregation/updatehandlers/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    updatehandlers
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_2_6" id="__nav_6_1_3_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_2_6">
            <span class="md-nav__icon md-icon"></span>
            updatehandlers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/updatehandlers/cflupdatehandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cflupdatehandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/updatehandlers/dflupdatehandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dflupdatehandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/updatehandlers/sdflupdatehandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sdflupdatehandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/aggregation/updatehandlers/updatehandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    updatehandler
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    datasets
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3" id="__nav_6_1_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3">
            <span class="md-nav__icon md-icon"></span>
            datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/changeablesubset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    changeablesubset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/cifar10/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    cifar10
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3_2" id="__nav_6_1_3_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            cifar10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/cifar10/cifar10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cifar10
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/cifar100/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    cifar100
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3_3" id="__nav_6_1_3_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3_3">
            <span class="md-nav__icon md-icon"></span>
            cifar100
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/cifar100/cifar100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cifar100
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/datamodule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datamodule
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/emnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    emnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3_5" id="__nav_6_1_3_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3_5">
            <span class="md-nav__icon md-icon"></span>
            emnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/emnist/emnist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    emnist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/fashionmnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    fashionmnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3_6" id="__nav_6_1_3_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3_6">
            <span class="md-nav__icon md-icon"></span>
            fashionmnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/fashionmnist/fashionmnist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fashionmnist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/datasets/mnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    mnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_3_7" id="__nav_6_1_3_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_3_7">
            <span class="md-nav__icon md-icon"></span>
            mnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/mnist/mnist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mnist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/datasets/nebuladataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebuladataset
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/eventmanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eventmanager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    models
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6" id="__nav_6_1_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/cifar10/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    cifar10
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_1" id="__nav_6_1_3_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_1">
            <span class="md-nav__icon md-icon"></span>
            cifar10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/cnnV2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnnV2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/cnnV3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnnV3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/fastermobilenet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fastermobilenet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/resnet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    resnet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar10/simplemobilenet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    simplemobilenet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/cifar100/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    cifar100
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_2" id="__nav_6_1_3_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_2">
            <span class="md-nav__icon md-icon"></span>
            cifar100
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/cifar100/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/emnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    emnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_3" id="__nav_6_1_3_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_3">
            <span class="md-nav__icon md-icon"></span>
            emnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/emnist/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/emnist/mlp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mlp
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/fashionmnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    fashionmnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_4" id="__nav_6_1_3_6_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_4">
            <span class="md-nav__icon md-icon"></span>
            fashionmnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/fashionmnist/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/fashionmnist/mlp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mlp
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/mnist/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    mnist
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_5" id="__nav_6_1_3_6_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_5">
            <span class="md-nav__icon md-icon"></span>
            mnist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/mnist/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/mnist/mlp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mlp
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/nebulamodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebulamodel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_6_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/models/sentiment140/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    sentiment140
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_6_7" id="__nav_6_1_3_6_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_6_7">
            <span class="md-nav__icon md-icon"></span>
            sentiment140
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/sentiment140/cnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cnn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/models/sentiment140/rnn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rnn
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/nebulaevents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebulaevents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/network/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    network
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_8" id="__nav_6_1_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_8">
            <span class="md-nav__icon md-icon"></span>
            network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/blacklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    blacklist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/communications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    communications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/connection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/discoverer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    discoverer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_8_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/network/externalconnection/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    externalconnection
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_8_6" id="__nav_6_1_3_8_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_8_6">
            <span class="md-nav__icon md-icon"></span>
            externalconnection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/externalconnection/externalconnectionservice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    externalconnectionservice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/externalconnection/nebuladiscoveryservice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebuladiscoveryservice
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/forwarder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    forwarder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    health
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    messages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/network/propagator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    propagator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/noderole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    noderole
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/pb/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    pb
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_11" id="__nav_6_1_3_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_11">
            <span class="md-nav__icon md-icon"></span>
            pb
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/pb/nebula_pb2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nebula_pb2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    role
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    situationalawareness
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13" id="__nav_6_1_3_13_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13">
            <span class="md-nav__icon md-icon"></span>
            situationalawareness
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    awareness
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1" id="__nav_6_1_3_13_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_13_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1">
            <span class="md-nav__icon md-icon"></span>
            awareness
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/arbitrationpolicies/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    arbitrationpolicies
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_1" id="__nav_6_1_3_13_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_1">
            <span class="md-nav__icon md-icon"></span>
            arbitrationpolicies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/arbitrationpolicies/arbitrationpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arbitrationpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/arbitrationpolicies/staticarbitrationpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    staticarbitrationpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/sanetwork/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    sanetwork
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_2" id="__nav_6_1_3_13_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_2">
            <span class="md-nav__icon md-icon"></span>
            sanetwork
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    neighborpolicies
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_2_1" id="__nav_6_1_3_13_1_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="7" aria-labelledby="__nav_6_1_3_13_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            neighborpolicies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/distanceneighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    distanceneighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/fcneighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fcneighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/idleneighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    idleneighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/neighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    neighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/ringneighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ringneighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/neighborpolicies/starneighborpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    starneighborpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sanetwork/sanetwork/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sanetwork
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sareasoner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sareasoner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/satraining/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    satraining
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_4" id="__nav_6_1_3_13_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_4">
            <span class="md-nav__icon md-icon"></span>
            satraining
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/satraining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    satraining
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    trainingpolicy
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_4_2" id="__nav_6_1_3_13_1_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="7" aria-labelledby="__nav_6_1_3_13_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            trainingpolicy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/bpstrainingpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpstrainingpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/fastreboot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fastreboot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/htstrainingpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    htstrainingpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/qdstrainingpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    qdstrainingpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/satraining/trainingpolicy/trainingpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    trainingpolicy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_1_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/awareness/sautils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    sautils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_1_5" id="__nav_6_1_3_13_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_1_5">
            <span class="md-nav__icon md-icon"></span>
            sautils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sautils/sacommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sacommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sautils/samoduleagent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    samoduleagent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/sautils/sasystemmonitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sasystemmonitor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/awareness/suggestionbuffer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    suggestionbuffer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/discovery/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    discovery
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_2" id="__nav_6_1_3_13_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_3_13_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_2">
            <span class="md-nav__icon md-icon"></span>
            discovery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/discovery/candidateselection/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    candidateselection
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_2_1" id="__nav_6_1_3_13_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_2_1">
            <span class="md-nav__icon md-icon"></span>
            candidateselection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/candidateselection/candidateselector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    candidateselector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/candidateselection/distcandidateselector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    distcandidateselector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/candidateselection/fccandidateselector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fccandidateselector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/candidateselection/ringcandidateselector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ringcandidateselector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/candidateselection/stdcandidateselector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    stdcandidateselector
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/federationconnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    federationconnector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_13_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/situationalawareness/discovery/modelhandlers/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    modelhandlers
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_13_2_3" id="__nav_6_1_3_13_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_3_13_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_13_2_3">
            <span class="md-nav__icon md-icon"></span>
            modelhandlers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/modelhandlers/aggmodelhandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    aggmodelhandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/modelhandlers/defaultmodelhandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    defaultmodelhandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/modelhandlers/modelhandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    modelhandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/discovery/modelhandlers/stdmodelhandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    stdmodelhandler
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/situationalawareness/situationalawareness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    situationalawareness
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_14" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../core/training/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    training
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_14" id="__nav_6_1_3_14_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_14">
            <span class="md-nav__icon md-icon"></span>
            training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/training/lightning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lightning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/training/scikit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    scikit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/training/siamese/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    siamese
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../frontend/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    frontend
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_4" id="__nav_6_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_4">
            <span class="md-nav__icon md-icon"></span>
            frontend
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    app
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../physical/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    physical
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_5" id="__nav_6_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_5">
            <span class="md-nav__icon md-icon"></span>
            physical
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physical/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    api
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../commercial-faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commercial FAQ
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      scenarios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scenario">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.attack_node_assign" class="md-nav__link">
    <span class="md-ellipsis">
      attack_node_assign
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.Scenario.mobility_assign" class="md-nav__link">
    <span class="md-ellipsis">
      mobility_assign
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement" class="md-nav__link">
    <span class="md-ellipsis">
      ScenarioManagement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ScenarioManagement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.create_topology" class="md-nav__link">
    <span class="md-ellipsis">
      create_topology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.load_configurations_and_start_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      load_configurations_and_start_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.remove_files_by_scenario" class="md-nav__link">
    <span class="md-ellipsis">
      remove_files_by_scenario
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.scenario_finished" class="md-nav__link">
    <span class="md-ellipsis">
      scenario_finished
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_docker" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_physical" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_physical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_process" class="md-nav__link">
    <span class="md-ellipsis">
      start_nodes_process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.stop_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      stop_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nebula.controller.scenarios.ScenarioManagement.stop_participants" class="md-nav__link">
    <span class="md-ellipsis">
      stop_participants
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


<h1 id="documentation-for-scenarios-module">Documentation for Scenarios Module<a class="headerlink" href="#documentation-for-scenarios-module" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="nebula.controller.scenarios"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="nebula.controller.scenarios.Scenario" class="doc doc-heading">
            <code>Scenario</code>


<a href="#nebula.controller.scenarios.Scenario" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>Class to define a scenario for the NEBULA platform.
It contains all the parameters needed to create a scenario and run it on the platform.</p>







              <details class="quote">
                <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Scenario</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to define a scenario for the NEBULA platform.</span>
<span class="sd">    It contains all the parameters needed to create a scenario and run it on the platform.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">scenario_title</span><span class="p">,</span>
        <span class="n">scenario_description</span><span class="p">,</span>
        <span class="n">deployment</span><span class="p">,</span>
        <span class="n">federation</span><span class="p">,</span>
        <span class="n">topology</span><span class="p">,</span>
        <span class="n">nodes</span><span class="p">,</span>
        <span class="n">nodes_graph</span><span class="p">,</span>
        <span class="n">n_nodes</span><span class="p">,</span>
        <span class="n">matrix</span><span class="p">,</span>
        <span class="n">dataset</span><span class="p">,</span>
        <span class="n">iid</span><span class="p">,</span>
        <span class="n">partition_selection</span><span class="p">,</span>
        <span class="n">partition_parameter</span><span class="p">,</span>
        <span class="n">model</span><span class="p">,</span>
        <span class="n">agg_algorithm</span><span class="p">,</span>
        <span class="n">rounds</span><span class="p">,</span>
        <span class="n">logginglevel</span><span class="p">,</span>
        <span class="n">report_status_data_queue</span><span class="p">,</span>
        <span class="n">accelerator</span><span class="p">,</span>
        <span class="n">gpu_id</span><span class="p">,</span>
        <span class="n">network_subnet</span><span class="p">,</span>
        <span class="n">network_gateway</span><span class="p">,</span>
        <span class="n">epochs</span><span class="p">,</span>
        <span class="n">attack_params</span><span class="p">,</span>
        <span class="n">reputation</span><span class="p">,</span>
        <span class="n">random_geo</span><span class="p">,</span>
        <span class="n">latitude</span><span class="p">,</span>
        <span class="n">longitude</span><span class="p">,</span>
        <span class="n">mobility</span><span class="p">,</span>
        <span class="n">network_simulation</span><span class="p">,</span>
        <span class="n">mobility_type</span><span class="p">,</span>
        <span class="n">radius_federation</span><span class="p">,</span>
        <span class="n">scheme_mobility</span><span class="p">,</span>
        <span class="n">round_frequency</span><span class="p">,</span>
        <span class="n">mobile_participants_percent</span><span class="p">,</span>
        <span class="n">additional_participants</span><span class="p">,</span>
        <span class="n">schema_additional_participants</span><span class="p">,</span>
        <span class="n">with_trustworthiness</span><span class="p">,</span>
        <span class="n">robustness_pillar</span><span class="p">,</span>
        <span class="n">resilience_to_attacks</span><span class="p">,</span>
        <span class="n">algorithm_robustness</span><span class="p">,</span>
        <span class="n">client_reliability</span><span class="p">,</span>
        <span class="n">privacy_pillar</span><span class="p">,</span>
        <span class="n">technique</span><span class="p">,</span>
        <span class="n">uncertainty</span><span class="p">,</span>
        <span class="n">indistinguishability</span><span class="p">,</span>
        <span class="n">fairness_pillar</span><span class="p">,</span>
        <span class="n">selection_fairness</span><span class="p">,</span>
        <span class="n">performance_fairness</span><span class="p">,</span>
        <span class="n">class_distribution</span><span class="p">,</span>
        <span class="n">explainability_pillar</span><span class="p">,</span>
        <span class="n">interpretability</span><span class="p">,</span>
        <span class="n">post_hoc_methods</span><span class="p">,</span>
        <span class="n">accountability_pillar</span><span class="p">,</span>
        <span class="n">factsheet_completeness</span><span class="p">,</span>
        <span class="n">architectural_soundness_pillar</span><span class="p">,</span>
        <span class="n">client_management</span><span class="p">,</span>
        <span class="n">optimization</span><span class="p">,</span>
        <span class="n">sustainability_pillar</span><span class="p">,</span>
        <span class="n">energy_source</span><span class="p">,</span>
        <span class="n">hardware_efficiency</span><span class="p">,</span>
        <span class="n">federation_complexity</span><span class="p">,</span>
        <span class="n">random_topology_probability</span><span class="p">,</span>
        <span class="n">with_sa</span><span class="p">,</span>
        <span class="n">strict_topology</span><span class="p">,</span>
        <span class="n">sad_candidate_selector</span><span class="p">,</span>
        <span class="n">sad_model_handler</span><span class="p">,</span>
        <span class="n">sar_arbitration_policy</span><span class="p">,</span>
        <span class="n">sar_neighbor_policy</span><span class="p">,</span>
        <span class="n">sar_training</span><span class="p">,</span>
        <span class="n">sar_training_policy</span><span class="p">,</span>
        <span class="n">physical_ips</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Scenario instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            scenario_title (str): Title of the scenario.</span>
<span class="sd">            scenario_description (str): Description of the scenario.</span>
<span class="sd">            deployment (str): Type of deployment.</span>
<span class="sd">            federation (str): Type of federation.</span>
<span class="sd">            topology (str): Type of topology.</span>
<span class="sd">            nodes (dict): Dictionary of nodes.</span>
<span class="sd">            nodes_graph (dict): Dictionary of nodes for graph representation.</span>
<span class="sd">            n_nodes (int): Number of nodes.</span>
<span class="sd">            matrix (list): Adjacency matrix.</span>
<span class="sd">            dataset (str): Name of the dataset.</span>
<span class="sd">            iid (bool): Whether the data is IID.</span>
<span class="sd">            partition_selection (str): Type of partition selection.</span>
<span class="sd">            partition_parameter (float): Parameter for partition selection.</span>
<span class="sd">            model (str): Name of the model.</span>
<span class="sd">            agg_algorithm (str): Aggregation algorithm.</span>
<span class="sd">            rounds (int): Number of rounds.</span>
<span class="sd">            logginglevel (bool): Whether to log.</span>
<span class="sd">            report_status_data_queue (bool): Whether to report status data.</span>
<span class="sd">            accelerator (str): Type of accelerator.</span>
<span class="sd">            gpu_id (str): ID of the GPU.</span>
<span class="sd">            network_subnet (str): Network subnet.</span>
<span class="sd">            network_gateway (str): Network gateway.</span>
<span class="sd">            epochs (int): Number of epochs.</span>
<span class="sd">            attack_params (dict): Dictionary containing attack parameters.</span>
<span class="sd">            reputation (dict): Dictionary containing reputation configuration.</span>
<span class="sd">            random_geo (bool): Indicator if random geo is used.</span>
<span class="sd">            latitude (float): Latitude for mobility.</span>
<span class="sd">            longitude (float): Longitude for mobility.</span>
<span class="sd">            mobility (bool): Whether mobility is enabled.</span>
<span class="sd">            network_simulation (bool): Whether network simulation is enabled.</span>
<span class="sd">            mobility_type (str): Type of mobility.</span>
<span class="sd">            radius_federation (float): Radius of federation.</span>
<span class="sd">            scheme_mobility (str): Scheme of mobility.</span>
<span class="sd">            round_frequency (int): Frequency of rounds.</span>
<span class="sd">            mobile_participants_percent (float): Percentage of mobile participants.</span>
<span class="sd">            additional_participants (list): List of additional participants.</span>
<span class="sd">            schema_additional_participants (str): Schema for additional participants.</span>
<span class="sd">            random_topology_probability (float): Probability for random topology.</span>
<span class="sd">            with_sa (bool): Whether situational awareness is enabled.</span>
<span class="sd">            strict_topology (bool): Whether strict topology is enabled.</span>
<span class="sd">            sad_candidate_selector (str): Candidate selector for SAD.</span>
<span class="sd">            sad_model_handler (str): Model handler for SAD.</span>
<span class="sd">            sar_arbitration_policy (str): Arbitration policy for SAR.</span>
<span class="sd">            sar_neighbor_policy (str): Neighbor policy for SAR.</span>
<span class="sd">            sar_training (bool): Wheter SAR training is enabled.</span>
<span class="sd">            sar_training_policy (str): Training policy for SAR.</span>
<span class="sd">            physical_ips (list, optional): List of physical IPs for nodes. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_title</span> <span class="o">=</span> <span class="n">scenario_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span> <span class="o">=</span> <span class="n">scenario_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deployment</span> <span class="o">=</span> <span class="n">deployment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">federation</span> <span class="o">=</span> <span class="n">federation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topology</span> <span class="o">=</span> <span class="n">topology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_graph</span> <span class="o">=</span> <span class="n">nodes_graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">=</span> <span class="n">n_nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iid</span> <span class="o">=</span> <span class="n">iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partition_selection</span> <span class="o">=</span> <span class="n">partition_selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partition_parameter</span> <span class="o">=</span> <span class="n">partition_parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agg_algorithm</span> <span class="o">=</span> <span class="n">agg_algorithm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">=</span> <span class="n">rounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logginglevel</span> <span class="o">=</span> <span class="n">logginglevel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">report_status_data_queue</span> <span class="o">=</span> <span class="n">report_status_data_queue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accelerator</span> <span class="o">=</span> <span class="n">accelerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gpu_id</span> <span class="o">=</span> <span class="n">gpu_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_subnet</span> <span class="o">=</span> <span class="n">network_subnet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_gateway</span> <span class="o">=</span> <span class="n">network_gateway</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epochs</span> <span class="o">=</span> <span class="n">epochs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attack_params</span> <span class="o">=</span> <span class="n">attack_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span> <span class="o">=</span> <span class="n">reputation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">random_geo</span> <span class="o">=</span> <span class="n">random_geo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mobility</span> <span class="o">=</span> <span class="n">mobility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_simulation</span> <span class="o">=</span> <span class="n">network_simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mobility_type</span> <span class="o">=</span> <span class="n">mobility_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius_federation</span> <span class="o">=</span> <span class="n">radius_federation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scheme_mobility</span> <span class="o">=</span> <span class="n">scheme_mobility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">round_frequency</span> <span class="o">=</span> <span class="n">round_frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mobile_participants_percent</span> <span class="o">=</span> <span class="n">mobile_participants_percent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_participants</span> <span class="o">=</span> <span class="n">additional_participants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_trustworthiness</span> <span class="o">=</span> <span class="n">with_trustworthiness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">robustness_pillar</span> <span class="o">=</span> <span class="n">robustness_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resilience_to_attacks</span> <span class="o">=</span> <span class="n">resilience_to_attacks</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm_robustness</span> <span class="o">=</span> <span class="n">algorithm_robustness</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_reliability</span> <span class="o">=</span> <span class="n">client_reliability</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">privacy_pillar</span> <span class="o">=</span> <span class="n">privacy_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">technique</span> <span class="o">=</span> <span class="n">technique</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">uncertainty</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indistinguishability</span> <span class="o">=</span> <span class="n">indistinguishability</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fairness_pillar</span> <span class="o">=</span> <span class="n">fairness_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_fairness</span> <span class="o">=</span> <span class="n">selection_fairness</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">performance_fairness</span> <span class="o">=</span> <span class="n">performance_fairness</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">class_distribution</span> <span class="o">=</span> <span class="n">class_distribution</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">explainability_pillar</span> <span class="o">=</span> <span class="n">explainability_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpretability</span> <span class="o">=</span> <span class="n">interpretability</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_hoc_methods</span> <span class="o">=</span> <span class="n">post_hoc_methods</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accountability_pillar</span> <span class="o">=</span> <span class="n">accountability_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">factsheet_completeness</span> <span class="o">=</span> <span class="n">factsheet_completeness</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">architectural_soundness_pillar</span> <span class="o">=</span> <span class="n">architectural_soundness_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_management</span> <span class="o">=</span> <span class="n">client_management</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimization</span> <span class="o">=</span> <span class="n">optimization</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sustainability_pillar</span> <span class="o">=</span> <span class="n">sustainability_pillar</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy_source</span> <span class="o">=</span> <span class="n">energy_source</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hardware_efficiency</span> <span class="o">=</span> <span class="n">hardware_efficiency</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">federation_complexity</span> <span class="o">=</span> <span class="n">federation_complexity</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema_additional_participants</span> <span class="o">=</span> <span class="n">schema_additional_participants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">random_topology_probability</span> <span class="o">=</span> <span class="n">random_topology_probability</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_sa</span> <span class="o">=</span> <span class="n">with_sa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strict_topology</span> <span class="o">=</span> <span class="n">strict_topology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sad_candidate_selector</span> <span class="o">=</span> <span class="n">sad_candidate_selector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sad_model_handler</span> <span class="o">=</span> <span class="n">sad_model_handler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sar_arbitration_policy</span> <span class="o">=</span> <span class="n">sar_arbitration_policy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sar_neighbor_policy</span> <span class="o">=</span> <span class="n">sar_neighbor_policy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sar_training</span> <span class="o">=</span> <span class="n">sar_training</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sar_training_policy</span> <span class="o">=</span> <span class="n">sar_training_policy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">physical_ips</span> <span class="o">=</span> <span class="n">physical_ips</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">attack_node_assign</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">nodes</span><span class="p">,</span>
        <span class="n">federation</span><span class="p">,</span>
        <span class="n">poisoned_node_percent</span><span class="p">,</span>
        <span class="n">poisoned_sample_percent</span><span class="p">,</span>
        <span class="n">poisoned_noise_percent</span><span class="p">,</span>
        <span class="n">attack_params</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assign and configure attack parameters to nodes within a federated learning network.</span>

<span class="sd">        This method:</span>
<span class="sd">            - Validates input attack parameters and percentages.</span>
<span class="sd">            - Determines which nodes will be marked as malicious based on the specified</span>
<span class="sd">              poisoned node percentage and attack type.</span>
<span class="sd">            - Assigns attack roles and parameters to selected nodes.</span>
<span class="sd">            - Supports multiple attack types such as Label Flipping, Sample Poisoning,</span>
<span class="sd">              Model Poisoning, GLL Neuron Inversion, Swapping Weights, Delayer, and Flooding.</span>
<span class="sd">            - Ensures proper validation and setting of attack-specific parameters, including</span>
<span class="sd">              targeting, noise types, delays, intervals, and attack rounds.</span>
<span class="sd">            - Updates nodes&#39; malicious status, reputation, and attack parameters accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            nodes (dict): Dictionary of nodes with their current attributes.</span>
<span class="sd">            federation (str): Type of federated learning framework (e.g., &quot;DFL&quot;).</span>
<span class="sd">            poisoned_node_percent (float): Percentage of nodes to be poisoned (0-100).</span>
<span class="sd">            poisoned_sample_percent (float): Percentage of samples to be poisoned (0-100).</span>
<span class="sd">            poisoned_noise_percent (float): Percentage of noise to apply in poisoning (0-100).</span>
<span class="sd">            attack_params (dict): Dictionary containing attack type and associated parameters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Updated nodes dictionary with assigned malicious roles and attack parameters.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If any input parameter is invalid or attack type is unrecognized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

        <span class="c1"># Validate input parameters</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">validate_percentage</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Validate that a given value is a float percentage between 0 and 100.</span>

<span class="sd">            Args:</span>
<span class="sd">                value: The value to validate, expected to be convertible to float.</span>
<span class="sd">                name (str): Name of the parameter, used for error messages.</span>

<span class="sd">            Returns:</span>
<span class="sd">                float: The validated percentage value.</span>

<span class="sd">            Raises:</span>
<span class="sd">                ValueError: If the value is not a float or not within the range [0, 100].</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be between 0 and 100&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!s}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">validate_positive_int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Validate that a given value is a positive integer (including zero).</span>

<span class="sd">            Args:</span>
<span class="sd">                value: The value to validate, expected to be convertible to int.</span>
<span class="sd">                name (str): Name of the parameter, used for error messages.</span>

<span class="sd">            Returns:</span>
<span class="sd">                int: The validated positive integer value.</span>

<span class="sd">            Raises:</span>
<span class="sd">                ValueError: If the value is not an integer or is negative.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be positive&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!s}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Validate attack type</span>
        <span class="n">valid_attacks</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;No Attack&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Label Flipping&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Sample Poisoning&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Model Poisoning&quot;</span><span class="p">,</span>
            <span class="s2">&quot;GLL Neuron Inversion&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Swapping Weights&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Delayer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Flooding&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Get attack type from attack_params</span>
        <span class="k">if</span> <span class="n">attack_params</span> <span class="ow">and</span> <span class="s2">&quot;attacks&quot;</span> <span class="ow">in</span> <span class="n">attack_params</span><span class="p">:</span>
            <span class="n">attack</span> <span class="o">=</span> <span class="n">attack_params</span><span class="p">[</span><span class="s2">&quot;attacks&quot;</span><span class="p">]</span>

        <span class="c1"># Handle attack parameter which can be either a string or None</span>
        <span class="k">if</span> <span class="n">attack</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attack</span> <span class="o">=</span> <span class="s2">&quot;No Attack&quot;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attack</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">. Expected string or None.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attack</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_attacks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">. Must be one of </span><span class="si">{</span><span class="n">valid_attacks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Get attack parameters from attack_params</span>
        <span class="n">poisoned_node_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_node_percent</span><span class="p">)</span>
        <span class="n">poisoned_sample_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_sample_percent</span><span class="p">)</span>
        <span class="n">poisoned_noise_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_noise_percent</span><span class="p">)</span>

        <span class="c1"># Validate percentage parameters</span>
        <span class="n">poisoned_node_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_node_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">)</span>
        <span class="n">poisoned_sample_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_sample_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">)</span>
        <span class="n">poisoned_noise_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_noise_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">)</span>

        <span class="n">nodes_index</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Get the nodes index</span>
        <span class="k">if</span> <span class="n">federation</span> <span class="o">==</span> <span class="s2">&quot;DFL&quot;</span><span class="p">:</span>
            <span class="n">nodes_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;server&quot;</span><span class="p">:</span>
                    <span class="n">nodes_index</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nodes index: </span><span class="si">{</span><span class="n">nodes_index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Poisoned node percent: </span><span class="si">{</span><span class="n">poisoned_node_percent</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">mal_nodes_defined</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Malicious nodes already defined: </span><span class="si">{</span><span class="n">mal_nodes_defined</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">attacked_nodes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">mal_nodes_defined</span> <span class="ow">and</span> <span class="n">attack</span> <span class="o">!=</span> <span class="s2">&quot;No Attack&quot;</span><span class="p">:</span>
            <span class="n">n_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes_index</span><span class="p">)</span>
            <span class="c1"># Number of attacked nodes, round up</span>
            <span class="n">num_attacked</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">poisoned_node_percent</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">n_nodes</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">num_attacked</span> <span class="o">&gt;</span> <span class="n">n_nodes</span><span class="p">:</span>
                <span class="n">num_attacked</span> <span class="o">=</span> <span class="n">n_nodes</span>

            <span class="c1"># Get the index of attacked nodes</span>
            <span class="n">attacked_nodes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">nodes_index</span><span class="p">,</span> <span class="n">num_attacked</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of nodes to attack: </span><span class="si">{</span><span class="n">num_attacked</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attacked nodes: </span><span class="si">{</span><span class="n">attacked_nodes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Assign the role of each node</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">node_att</span> <span class="o">=</span> <span class="s2">&quot;No Attack&quot;</span>
            <span class="n">malicious</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">node_reputation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span> <span class="k">else</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">attacked_nodes</span> <span class="ow">or</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]:</span>
                <span class="n">malicious</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">node_reputation</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">node_att</span> <span class="o">=</span> <span class="n">attack</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> marked as malicious with attack </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># Initialize attack parameters with defaults</span>
                <span class="n">node_attack_params</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">attack_params</span> <span class="k">else</span> <span class="p">{}</span>

                <span class="c1"># Set attack-specific parameters</span>
                <span class="k">if</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Label Flipping&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_sample_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targeted&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]:</span>
                        <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                            <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_label&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;target_label&quot;</span>
                        <span class="p">)</span>
                        <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_changed_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                            <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_changed_label&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;target_changed_label&quot;</span>
                        <span class="p">)</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Sample Poisoning&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_sample_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_noise_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;noise_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;noise_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targeted&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]:</span>
                        <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                            <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_label&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;target_label&quot;</span>
                        <span class="p">)</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Model Poisoning&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_noise_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;noise_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;noise_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;GLL Neuron Inversion&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Swapping Weights&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;layer_idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layer_idx&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;layer_idx&quot;</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Delayer&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span><span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;delay&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;delay&quot;</span><span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;target_percentage&quot;</span>
                    <span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;selection_interval&quot;</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Flooding&quot;</span><span class="p">:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;flooding_factor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;flooding_factor&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;flooding_factor&quot;</span>
                    <span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;target_percentage&quot;</span>
                    <span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;selection_interval&quot;</span>
                    <span class="p">)</span>

                <span class="c1"># Add common attack parameters</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;round_start_attack&quot;</span>
                <span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;round_stop_attack&quot;</span>
                <span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;attack_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attack_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;attack_interval&quot;</span>
                <span class="p">)</span>

                <span class="c1"># Validate round parameters</span>
                <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;round_start_attack must be less than round_stop_attack&quot;</span><span class="p">)</span>

                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;attacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_att</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_attack_params</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;fake_behavior&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;malicious&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attacks&quot;</span><span class="p">:</span> <span class="s2">&quot;No Attack&quot;</span><span class="p">}</span>

            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;reputation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_reputation</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> final configuration - malicious: </span><span class="si">{</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;malicious&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, attack: </span><span class="si">{</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;attack_params&#39;</span><span class="p">][</span><span class="s1">&#39;attacks&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">nodes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mobility_assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">mobile_participants_percent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assign mobility status to a subset of nodes based on a specified percentage.</span>

<span class="sd">        This method:</span>
<span class="sd">            - Calculates the number of mobile nodes by applying the given percentage.</span>
<span class="sd">            - Randomly selects nodes to be marked as mobile.</span>
<span class="sd">            - Updates each node&#39;s &quot;mobility&quot; attribute to True or False accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            nodes (dict): Dictionary of nodes with their current attributes.</span>
<span class="sd">            mobile_participants_percent (float): Percentage of nodes to be assigned mobility (0-100).</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Updated nodes dictionary with mobility status assigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

        <span class="c1"># Number of mobile nodes, round down</span>
        <span class="n">num_mobile</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">mobile_participants_percent</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">num_mobile</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
            <span class="n">num_mobile</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

        <span class="c1"># Get the index of mobile nodes</span>
        <span class="n">mobile_nodes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">num_mobile</span><span class="p">)</span>

        <span class="c1"># Assign the role of each node</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">node_mob</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">mobile_nodes</span><span class="p">:</span>
                <span class="n">node_mob</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;mobility&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_mob</span>
        <span class="k">return</span> <span class="n">nodes</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an instance of the class from a dictionary of attributes.</span>

<span class="sd">        This class method:</span>
<span class="sd">            - Copies the input dictionary to prevent modification of the original data.</span>
<span class="sd">            - Instantiates the class using the dictionary unpacked as keyword arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (dict): Dictionary containing attributes to initialize the class instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            cls: An instance of the class initialized with the provided data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create a copy of the data to avoid modifying the original</span>
        <span class="n">scenario_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Create the scenario object</span>
        <span class="n">scenario</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">scenario_data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">scenario</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.Scenario.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">scenario_title</span><span class="p">,</span> <span class="n">scenario_description</span><span class="p">,</span> <span class="n">deployment</span><span class="p">,</span> <span class="n">federation</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">nodes_graph</span><span class="p">,</span> <span class="n">n_nodes</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">iid</span><span class="p">,</span> <span class="n">partition_selection</span><span class="p">,</span> <span class="n">partition_parameter</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">agg_algorithm</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span> <span class="n">logginglevel</span><span class="p">,</span> <span class="n">report_status_data_queue</span><span class="p">,</span> <span class="n">accelerator</span><span class="p">,</span> <span class="n">gpu_id</span><span class="p">,</span> <span class="n">network_subnet</span><span class="p">,</span> <span class="n">network_gateway</span><span class="p">,</span> <span class="n">epochs</span><span class="p">,</span> <span class="n">attack_params</span><span class="p">,</span> <span class="n">reputation</span><span class="p">,</span> <span class="n">random_geo</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">mobility</span><span class="p">,</span> <span class="n">network_simulation</span><span class="p">,</span> <span class="n">mobility_type</span><span class="p">,</span> <span class="n">radius_federation</span><span class="p">,</span> <span class="n">scheme_mobility</span><span class="p">,</span> <span class="n">round_frequency</span><span class="p">,</span> <span class="n">mobile_participants_percent</span><span class="p">,</span> <span class="n">additional_participants</span><span class="p">,</span> <span class="n">schema_additional_participants</span><span class="p">,</span> <span class="n">with_trustworthiness</span><span class="p">,</span> <span class="n">robustness_pillar</span><span class="p">,</span> <span class="n">resilience_to_attacks</span><span class="p">,</span> <span class="n">algorithm_robustness</span><span class="p">,</span> <span class="n">client_reliability</span><span class="p">,</span> <span class="n">privacy_pillar</span><span class="p">,</span> <span class="n">technique</span><span class="p">,</span> <span class="n">uncertainty</span><span class="p">,</span> <span class="n">indistinguishability</span><span class="p">,</span> <span class="n">fairness_pillar</span><span class="p">,</span> <span class="n">selection_fairness</span><span class="p">,</span> <span class="n">performance_fairness</span><span class="p">,</span> <span class="n">class_distribution</span><span class="p">,</span> <span class="n">explainability_pillar</span><span class="p">,</span> <span class="n">interpretability</span><span class="p">,</span> <span class="n">post_hoc_methods</span><span class="p">,</span> <span class="n">accountability_pillar</span><span class="p">,</span> <span class="n">factsheet_completeness</span><span class="p">,</span> <span class="n">architectural_soundness_pillar</span><span class="p">,</span> <span class="n">client_management</span><span class="p">,</span> <span class="n">optimization</span><span class="p">,</span> <span class="n">sustainability_pillar</span><span class="p">,</span> <span class="n">energy_source</span><span class="p">,</span> <span class="n">hardware_efficiency</span><span class="p">,</span> <span class="n">federation_complexity</span><span class="p">,</span> <span class="n">random_topology_probability</span><span class="p">,</span> <span class="n">with_sa</span><span class="p">,</span> <span class="n">strict_topology</span><span class="p">,</span> <span class="n">sad_candidate_selector</span><span class="p">,</span> <span class="n">sad_model_handler</span><span class="p">,</span> <span class="n">sar_arbitration_policy</span><span class="p">,</span> <span class="n">sar_neighbor_policy</span><span class="p">,</span> <span class="n">sar_training</span><span class="p">,</span> <span class="n">sar_training_policy</span><span class="p">,</span> <span class="n">physical_ips</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nebula.controller.scenarios.Scenario.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize a Scenario instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>scenario_title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the scenario.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scenario_description</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Description of the scenario.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>deployment</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of deployment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>federation</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of federation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>topology</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of topology.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodes</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of nodes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>nodes_graph</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of nodes for graph representation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>n_nodes</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of nodes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>matrix</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Adjacency matrix.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dataset</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>iid</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the data is IID.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>partition_selection</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of partition selection.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>partition_parameter</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parameter for partition selection.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>agg_algorithm</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Aggregation algorithm.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rounds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of rounds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logginglevel</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to log.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>report_status_data_queue</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to report status data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>accelerator</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of accelerator.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>gpu_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the GPU.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>network_subnet</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Network subnet.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>network_gateway</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Network gateway.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>epochs</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of epochs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attack_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing attack parameters.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reputation</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing reputation configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>random_geo</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicator if random geo is used.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>latitude</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Latitude for mobility.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>longitude</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitude for mobility.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mobility</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether mobility is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>network_simulation</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether network simulation is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mobility_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of mobility.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>radius_federation</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Radius of federation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scheme_mobility</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Scheme of mobility.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>round_frequency</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frequency of rounds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mobile_participants_percent</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of mobile participants.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>additional_participants</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of additional participants.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema_additional_participants</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema for additional participants.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>random_topology_probability</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Probability for random topology.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_sa</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether situational awareness is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>strict_topology</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether strict topology is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sad_candidate_selector</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Candidate selector for SAD.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sad_model_handler</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model handler for SAD.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sar_arbitration_policy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arbitration policy for SAR.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sar_neighbor_policy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Neighbor policy for SAR.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sar_training</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wheter SAR training is enabled.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sar_training_policy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Training policy for SAR.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>physical_ips</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of physical IPs for nodes. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">scenario_title</span><span class="p">,</span>
    <span class="n">scenario_description</span><span class="p">,</span>
    <span class="n">deployment</span><span class="p">,</span>
    <span class="n">federation</span><span class="p">,</span>
    <span class="n">topology</span><span class="p">,</span>
    <span class="n">nodes</span><span class="p">,</span>
    <span class="n">nodes_graph</span><span class="p">,</span>
    <span class="n">n_nodes</span><span class="p">,</span>
    <span class="n">matrix</span><span class="p">,</span>
    <span class="n">dataset</span><span class="p">,</span>
    <span class="n">iid</span><span class="p">,</span>
    <span class="n">partition_selection</span><span class="p">,</span>
    <span class="n">partition_parameter</span><span class="p">,</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">agg_algorithm</span><span class="p">,</span>
    <span class="n">rounds</span><span class="p">,</span>
    <span class="n">logginglevel</span><span class="p">,</span>
    <span class="n">report_status_data_queue</span><span class="p">,</span>
    <span class="n">accelerator</span><span class="p">,</span>
    <span class="n">gpu_id</span><span class="p">,</span>
    <span class="n">network_subnet</span><span class="p">,</span>
    <span class="n">network_gateway</span><span class="p">,</span>
    <span class="n">epochs</span><span class="p">,</span>
    <span class="n">attack_params</span><span class="p">,</span>
    <span class="n">reputation</span><span class="p">,</span>
    <span class="n">random_geo</span><span class="p">,</span>
    <span class="n">latitude</span><span class="p">,</span>
    <span class="n">longitude</span><span class="p">,</span>
    <span class="n">mobility</span><span class="p">,</span>
    <span class="n">network_simulation</span><span class="p">,</span>
    <span class="n">mobility_type</span><span class="p">,</span>
    <span class="n">radius_federation</span><span class="p">,</span>
    <span class="n">scheme_mobility</span><span class="p">,</span>
    <span class="n">round_frequency</span><span class="p">,</span>
    <span class="n">mobile_participants_percent</span><span class="p">,</span>
    <span class="n">additional_participants</span><span class="p">,</span>
    <span class="n">schema_additional_participants</span><span class="p">,</span>
    <span class="n">with_trustworthiness</span><span class="p">,</span>
    <span class="n">robustness_pillar</span><span class="p">,</span>
    <span class="n">resilience_to_attacks</span><span class="p">,</span>
    <span class="n">algorithm_robustness</span><span class="p">,</span>
    <span class="n">client_reliability</span><span class="p">,</span>
    <span class="n">privacy_pillar</span><span class="p">,</span>
    <span class="n">technique</span><span class="p">,</span>
    <span class="n">uncertainty</span><span class="p">,</span>
    <span class="n">indistinguishability</span><span class="p">,</span>
    <span class="n">fairness_pillar</span><span class="p">,</span>
    <span class="n">selection_fairness</span><span class="p">,</span>
    <span class="n">performance_fairness</span><span class="p">,</span>
    <span class="n">class_distribution</span><span class="p">,</span>
    <span class="n">explainability_pillar</span><span class="p">,</span>
    <span class="n">interpretability</span><span class="p">,</span>
    <span class="n">post_hoc_methods</span><span class="p">,</span>
    <span class="n">accountability_pillar</span><span class="p">,</span>
    <span class="n">factsheet_completeness</span><span class="p">,</span>
    <span class="n">architectural_soundness_pillar</span><span class="p">,</span>
    <span class="n">client_management</span><span class="p">,</span>
    <span class="n">optimization</span><span class="p">,</span>
    <span class="n">sustainability_pillar</span><span class="p">,</span>
    <span class="n">energy_source</span><span class="p">,</span>
    <span class="n">hardware_efficiency</span><span class="p">,</span>
    <span class="n">federation_complexity</span><span class="p">,</span>
    <span class="n">random_topology_probability</span><span class="p">,</span>
    <span class="n">with_sa</span><span class="p">,</span>
    <span class="n">strict_topology</span><span class="p">,</span>
    <span class="n">sad_candidate_selector</span><span class="p">,</span>
    <span class="n">sad_model_handler</span><span class="p">,</span>
    <span class="n">sar_arbitration_policy</span><span class="p">,</span>
    <span class="n">sar_neighbor_policy</span><span class="p">,</span>
    <span class="n">sar_training</span><span class="p">,</span>
    <span class="n">sar_training_policy</span><span class="p">,</span>
    <span class="n">physical_ips</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a Scenario instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        scenario_title (str): Title of the scenario.</span>
<span class="sd">        scenario_description (str): Description of the scenario.</span>
<span class="sd">        deployment (str): Type of deployment.</span>
<span class="sd">        federation (str): Type of federation.</span>
<span class="sd">        topology (str): Type of topology.</span>
<span class="sd">        nodes (dict): Dictionary of nodes.</span>
<span class="sd">        nodes_graph (dict): Dictionary of nodes for graph representation.</span>
<span class="sd">        n_nodes (int): Number of nodes.</span>
<span class="sd">        matrix (list): Adjacency matrix.</span>
<span class="sd">        dataset (str): Name of the dataset.</span>
<span class="sd">        iid (bool): Whether the data is IID.</span>
<span class="sd">        partition_selection (str): Type of partition selection.</span>
<span class="sd">        partition_parameter (float): Parameter for partition selection.</span>
<span class="sd">        model (str): Name of the model.</span>
<span class="sd">        agg_algorithm (str): Aggregation algorithm.</span>
<span class="sd">        rounds (int): Number of rounds.</span>
<span class="sd">        logginglevel (bool): Whether to log.</span>
<span class="sd">        report_status_data_queue (bool): Whether to report status data.</span>
<span class="sd">        accelerator (str): Type of accelerator.</span>
<span class="sd">        gpu_id (str): ID of the GPU.</span>
<span class="sd">        network_subnet (str): Network subnet.</span>
<span class="sd">        network_gateway (str): Network gateway.</span>
<span class="sd">        epochs (int): Number of epochs.</span>
<span class="sd">        attack_params (dict): Dictionary containing attack parameters.</span>
<span class="sd">        reputation (dict): Dictionary containing reputation configuration.</span>
<span class="sd">        random_geo (bool): Indicator if random geo is used.</span>
<span class="sd">        latitude (float): Latitude for mobility.</span>
<span class="sd">        longitude (float): Longitude for mobility.</span>
<span class="sd">        mobility (bool): Whether mobility is enabled.</span>
<span class="sd">        network_simulation (bool): Whether network simulation is enabled.</span>
<span class="sd">        mobility_type (str): Type of mobility.</span>
<span class="sd">        radius_federation (float): Radius of federation.</span>
<span class="sd">        scheme_mobility (str): Scheme of mobility.</span>
<span class="sd">        round_frequency (int): Frequency of rounds.</span>
<span class="sd">        mobile_participants_percent (float): Percentage of mobile participants.</span>
<span class="sd">        additional_participants (list): List of additional participants.</span>
<span class="sd">        schema_additional_participants (str): Schema for additional participants.</span>
<span class="sd">        random_topology_probability (float): Probability for random topology.</span>
<span class="sd">        with_sa (bool): Whether situational awareness is enabled.</span>
<span class="sd">        strict_topology (bool): Whether strict topology is enabled.</span>
<span class="sd">        sad_candidate_selector (str): Candidate selector for SAD.</span>
<span class="sd">        sad_model_handler (str): Model handler for SAD.</span>
<span class="sd">        sar_arbitration_policy (str): Arbitration policy for SAR.</span>
<span class="sd">        sar_neighbor_policy (str): Neighbor policy for SAR.</span>
<span class="sd">        sar_training (bool): Wheter SAR training is enabled.</span>
<span class="sd">        sar_training_policy (str): Training policy for SAR.</span>
<span class="sd">        physical_ips (list, optional): List of physical IPs for nodes. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_title</span> <span class="o">=</span> <span class="n">scenario_title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span> <span class="o">=</span> <span class="n">scenario_description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">deployment</span> <span class="o">=</span> <span class="n">deployment</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">federation</span> <span class="o">=</span> <span class="n">federation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">topology</span> <span class="o">=</span> <span class="n">topology</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nodes_graph</span> <span class="o">=</span> <span class="n">nodes_graph</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">=</span> <span class="n">n_nodes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">matrix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">iid</span> <span class="o">=</span> <span class="n">iid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">partition_selection</span> <span class="o">=</span> <span class="n">partition_selection</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">partition_parameter</span> <span class="o">=</span> <span class="n">partition_parameter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">agg_algorithm</span> <span class="o">=</span> <span class="n">agg_algorithm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rounds</span> <span class="o">=</span> <span class="n">rounds</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logginglevel</span> <span class="o">=</span> <span class="n">logginglevel</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">report_status_data_queue</span> <span class="o">=</span> <span class="n">report_status_data_queue</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">accelerator</span> <span class="o">=</span> <span class="n">accelerator</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gpu_id</span> <span class="o">=</span> <span class="n">gpu_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_subnet</span> <span class="o">=</span> <span class="n">network_subnet</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_gateway</span> <span class="o">=</span> <span class="n">network_gateway</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">epochs</span> <span class="o">=</span> <span class="n">epochs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">attack_params</span> <span class="o">=</span> <span class="n">attack_params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span> <span class="o">=</span> <span class="n">reputation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">random_geo</span> <span class="o">=</span> <span class="n">random_geo</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mobility</span> <span class="o">=</span> <span class="n">mobility</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_simulation</span> <span class="o">=</span> <span class="n">network_simulation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mobility_type</span> <span class="o">=</span> <span class="n">mobility_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">radius_federation</span> <span class="o">=</span> <span class="n">radius_federation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scheme_mobility</span> <span class="o">=</span> <span class="n">scheme_mobility</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">round_frequency</span> <span class="o">=</span> <span class="n">round_frequency</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mobile_participants_percent</span> <span class="o">=</span> <span class="n">mobile_participants_percent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">additional_participants</span> <span class="o">=</span> <span class="n">additional_participants</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">with_trustworthiness</span> <span class="o">=</span> <span class="n">with_trustworthiness</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">robustness_pillar</span> <span class="o">=</span> <span class="n">robustness_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resilience_to_attacks</span> <span class="o">=</span> <span class="n">resilience_to_attacks</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">algorithm_robustness</span> <span class="o">=</span> <span class="n">algorithm_robustness</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client_reliability</span> <span class="o">=</span> <span class="n">client_reliability</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">privacy_pillar</span> <span class="o">=</span> <span class="n">privacy_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">technique</span> <span class="o">=</span> <span class="n">technique</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">uncertainty</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">indistinguishability</span> <span class="o">=</span> <span class="n">indistinguishability</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fairness_pillar</span> <span class="o">=</span> <span class="n">fairness_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selection_fairness</span> <span class="o">=</span> <span class="n">selection_fairness</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">performance_fairness</span> <span class="o">=</span> <span class="n">performance_fairness</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">class_distribution</span> <span class="o">=</span> <span class="n">class_distribution</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">explainability_pillar</span> <span class="o">=</span> <span class="n">explainability_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interpretability</span> <span class="o">=</span> <span class="n">interpretability</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">post_hoc_methods</span> <span class="o">=</span> <span class="n">post_hoc_methods</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">accountability_pillar</span> <span class="o">=</span> <span class="n">accountability_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">factsheet_completeness</span> <span class="o">=</span> <span class="n">factsheet_completeness</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">architectural_soundness_pillar</span> <span class="o">=</span> <span class="n">architectural_soundness_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client_management</span> <span class="o">=</span> <span class="n">client_management</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">optimization</span> <span class="o">=</span> <span class="n">optimization</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sustainability_pillar</span> <span class="o">=</span> <span class="n">sustainability_pillar</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">energy_source</span> <span class="o">=</span> <span class="n">energy_source</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hardware_efficiency</span> <span class="o">=</span> <span class="n">hardware_efficiency</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">federation_complexity</span> <span class="o">=</span> <span class="n">federation_complexity</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema_additional_participants</span> <span class="o">=</span> <span class="n">schema_additional_participants</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">random_topology_probability</span> <span class="o">=</span> <span class="n">random_topology_probability</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">with_sa</span> <span class="o">=</span> <span class="n">with_sa</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">strict_topology</span> <span class="o">=</span> <span class="n">strict_topology</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sad_candidate_selector</span> <span class="o">=</span> <span class="n">sad_candidate_selector</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sad_model_handler</span> <span class="o">=</span> <span class="n">sad_model_handler</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sar_arbitration_policy</span> <span class="o">=</span> <span class="n">sar_arbitration_policy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sar_neighbor_policy</span> <span class="o">=</span> <span class="n">sar_neighbor_policy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sar_training</span> <span class="o">=</span> <span class="n">sar_training</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sar_training_policy</span> <span class="o">=</span> <span class="n">sar_training_policy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">physical_ips</span> <span class="o">=</span> <span class="n">physical_ips</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.Scenario.attack_node_assign" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">attack_node_assign</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">federation</span><span class="p">,</span> <span class="n">poisoned_node_percent</span><span class="p">,</span> <span class="n">poisoned_sample_percent</span><span class="p">,</span> <span class="n">poisoned_noise_percent</span><span class="p">,</span> <span class="n">attack_params</span><span class="p">)</span></code>

<a href="#nebula.controller.scenarios.Scenario.attack_node_assign" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Assign and configure attack parameters to nodes within a federated learning network.</p>


<details class="this-method" open>
  <summary>This method</summary>
  <ul>
<li>Validates input attack parameters and percentages.</li>
<li>Determines which nodes will be marked as malicious based on the specified
  poisoned node percentage and attack type.</li>
<li>Assigns attack roles and parameters to selected nodes.</li>
<li>Supports multiple attack types such as Label Flipping, Sample Poisoning,
  Model Poisoning, GLL Neuron Inversion, Swapping Weights, Delayer, and Flooding.</li>
<li>Ensures proper validation and setting of attack-specific parameters, including
  targeting, noise types, delays, intervals, and attack rounds.</li>
<li>Updates nodes' malicious status, reputation, and attack parameters accordingly.</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>nodes</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of nodes with their current attributes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>federation</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of federated learning framework (e.g., "DFL").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>poisoned_node_percent</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of nodes to be poisoned (0-100).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>poisoned_sample_percent</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of samples to be poisoned (0-100).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>poisoned_noise_percent</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of noise to apply in poisoning (0-100).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attack_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing attack type and associated parameters.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated nodes dictionary with assigned malicious roles and attack parameters.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any input parameter is invalid or attack type is unrecognized.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">attack_node_assign</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">nodes</span><span class="p">,</span>
    <span class="n">federation</span><span class="p">,</span>
    <span class="n">poisoned_node_percent</span><span class="p">,</span>
    <span class="n">poisoned_sample_percent</span><span class="p">,</span>
    <span class="n">poisoned_noise_percent</span><span class="p">,</span>
    <span class="n">attack_params</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assign and configure attack parameters to nodes within a federated learning network.</span>

<span class="sd">    This method:</span>
<span class="sd">        - Validates input attack parameters and percentages.</span>
<span class="sd">        - Determines which nodes will be marked as malicious based on the specified</span>
<span class="sd">          poisoned node percentage and attack type.</span>
<span class="sd">        - Assigns attack roles and parameters to selected nodes.</span>
<span class="sd">        - Supports multiple attack types such as Label Flipping, Sample Poisoning,</span>
<span class="sd">          Model Poisoning, GLL Neuron Inversion, Swapping Weights, Delayer, and Flooding.</span>
<span class="sd">        - Ensures proper validation and setting of attack-specific parameters, including</span>
<span class="sd">          targeting, noise types, delays, intervals, and attack rounds.</span>
<span class="sd">        - Updates nodes&#39; malicious status, reputation, and attack parameters accordingly.</span>

<span class="sd">    Args:</span>
<span class="sd">        nodes (dict): Dictionary of nodes with their current attributes.</span>
<span class="sd">        federation (str): Type of federated learning framework (e.g., &quot;DFL&quot;).</span>
<span class="sd">        poisoned_node_percent (float): Percentage of nodes to be poisoned (0-100).</span>
<span class="sd">        poisoned_sample_percent (float): Percentage of samples to be poisoned (0-100).</span>
<span class="sd">        poisoned_noise_percent (float): Percentage of noise to apply in poisoning (0-100).</span>
<span class="sd">        attack_params (dict): Dictionary containing attack type and associated parameters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Updated nodes dictionary with assigned malicious roles and attack parameters.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any input parameter is invalid or attack type is unrecognized.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

    <span class="c1"># Validate input parameters</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_percentage</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate that a given value is a float percentage between 0 and 100.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to validate, expected to be convertible to float.</span>
<span class="sd">            name (str): Name of the parameter, used for error messages.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The validated percentage value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the value is not a float or not within the range [0, 100].</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be between 0 and 100&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!s}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_positive_int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate that a given value is a positive integer (including zero).</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to validate, expected to be convertible to int.</span>
<span class="sd">            name (str): Name of the parameter, used for error messages.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The validated positive integer value.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the value is not an integer or is negative.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be positive&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!s}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Validate attack type</span>
    <span class="n">valid_attacks</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;No Attack&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Label Flipping&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sample Poisoning&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Model Poisoning&quot;</span><span class="p">,</span>
        <span class="s2">&quot;GLL Neuron Inversion&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Swapping Weights&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Delayer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Flooding&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Get attack type from attack_params</span>
    <span class="k">if</span> <span class="n">attack_params</span> <span class="ow">and</span> <span class="s2">&quot;attacks&quot;</span> <span class="ow">in</span> <span class="n">attack_params</span><span class="p">:</span>
        <span class="n">attack</span> <span class="o">=</span> <span class="n">attack_params</span><span class="p">[</span><span class="s2">&quot;attacks&quot;</span><span class="p">]</span>

    <span class="c1"># Handle attack parameter which can be either a string or None</span>
    <span class="k">if</span> <span class="n">attack</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attack</span> <span class="o">=</span> <span class="s2">&quot;No Attack&quot;</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attack</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">. Expected string or None.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">attack</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_attacks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">. Must be one of </span><span class="si">{</span><span class="n">valid_attacks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Get attack parameters from attack_params</span>
    <span class="n">poisoned_node_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_node_percent</span><span class="p">)</span>
    <span class="n">poisoned_sample_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_sample_percent</span><span class="p">)</span>
    <span class="n">poisoned_noise_percent</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">,</span> <span class="n">poisoned_noise_percent</span><span class="p">)</span>

    <span class="c1"># Validate percentage parameters</span>
    <span class="n">poisoned_node_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_node_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">)</span>
    <span class="n">poisoned_sample_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_sample_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">)</span>
    <span class="n">poisoned_noise_percent</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span><span class="n">poisoned_noise_percent</span><span class="p">,</span> <span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">)</span>

    <span class="n">nodes_index</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Get the nodes index</span>
    <span class="k">if</span> <span class="n">federation</span> <span class="o">==</span> <span class="s2">&quot;DFL&quot;</span><span class="p">:</span>
        <span class="n">nodes_index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;server&quot;</span><span class="p">:</span>
                <span class="n">nodes_index</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nodes index: </span><span class="si">{</span><span class="n">nodes_index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attack type: </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Poisoned node percent: </span><span class="si">{</span><span class="n">poisoned_node_percent</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">mal_nodes_defined</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Malicious nodes already defined: </span><span class="si">{</span><span class="n">mal_nodes_defined</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">attacked_nodes</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">mal_nodes_defined</span> <span class="ow">and</span> <span class="n">attack</span> <span class="o">!=</span> <span class="s2">&quot;No Attack&quot;</span><span class="p">:</span>
        <span class="n">n_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes_index</span><span class="p">)</span>
        <span class="c1"># Number of attacked nodes, round up</span>
        <span class="n">num_attacked</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">poisoned_node_percent</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">n_nodes</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">num_attacked</span> <span class="o">&gt;</span> <span class="n">n_nodes</span><span class="p">:</span>
            <span class="n">num_attacked</span> <span class="o">=</span> <span class="n">n_nodes</span>

        <span class="c1"># Get the index of attacked nodes</span>
        <span class="n">attacked_nodes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">nodes_index</span><span class="p">,</span> <span class="n">num_attacked</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of nodes to attack: </span><span class="si">{</span><span class="n">num_attacked</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attacked nodes: </span><span class="si">{</span><span class="n">attacked_nodes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Assign the role of each node</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="n">node_att</span> <span class="o">=</span> <span class="s2">&quot;No Attack&quot;</span>
        <span class="n">malicious</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">node_reputation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reputation</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">attacked_nodes</span> <span class="ow">or</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]:</span>
            <span class="n">malicious</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">node_reputation</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">node_att</span> <span class="o">=</span> <span class="n">attack</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> marked as malicious with attack </span><span class="si">{</span><span class="n">attack</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Initialize attack parameters with defaults</span>
            <span class="n">node_attack_params</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">attack_params</span> <span class="k">else</span> <span class="p">{}</span>

            <span class="c1"># Set attack-specific parameters</span>
            <span class="k">if</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Label Flipping&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_sample_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targeted&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_label&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;target_label&quot;</span>
                    <span class="p">)</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_changed_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_changed_label&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;target_changed_label&quot;</span>
                    <span class="p">)</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Sample Poisoning&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_sample_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_noise_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;noise_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;noise_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;targeted&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;targeted&quot;</span><span class="p">]:</span>
                    <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                        <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_label&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;target_label&quot;</span>
                    <span class="p">)</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Model Poisoning&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_noise_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;noise_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;noise_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;GLL Neuron Inversion&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Swapping Weights&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;layer_idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layer_idx&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;layer_idx&quot;</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Delayer&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span><span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;delay&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;delay&quot;</span><span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;target_percentage&quot;</span>
                <span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;selection_interval&quot;</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">attack</span> <span class="o">==</span> <span class="s2">&quot;Flooding&quot;</span><span class="p">:</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisoned_node_percent</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;flooding_factor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;flooding_factor&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;flooding_factor&quot;</span>
                <span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_percentage</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_percentage&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s2">&quot;target_percentage&quot;</span>
                <span class="p">)</span>
                <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                    <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selection_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;selection_interval&quot;</span>
                <span class="p">)</span>

            <span class="c1"># Add common attack parameters</span>
            <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;round_start_attack&quot;</span>
            <span class="p">)</span>
            <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;round_stop_attack&quot;</span>
            <span class="p">)</span>
            <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;attack_interval&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">validate_positive_int</span><span class="p">(</span>
                <span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attack_interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;attack_interval&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Validate round parameters</span>
            <span class="k">if</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_start_attack&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;round_stop_attack&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;round_start_attack must be less than round_stop_attack&quot;</span><span class="p">)</span>

            <span class="n">node_attack_params</span><span class="p">[</span><span class="s2">&quot;attacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_att</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_attack_params</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;fake_behavior&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;malicious&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attacks&quot;</span><span class="p">:</span> <span class="s2">&quot;No Attack&quot;</span><span class="p">}</span>

        <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;reputation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_reputation</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> final configuration - malicious: </span><span class="si">{</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;malicious&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, attack: </span><span class="si">{</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;attack_params&#39;</span><span class="p">][</span><span class="s1">&#39;attacks&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">nodes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.Scenario.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#nebula.controller.scenarios.Scenario.from_dict" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create an instance of the class from a dictionary of attributes.</p>


<details class="this-class-method" open>
  <summary>This class method</summary>
  <ul>
<li>Copies the input dictionary to prevent modification of the original data.</li>
<li>Instantiates the class using the dictionary unpacked as keyword arguments.</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing attributes to initialize the class instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>cls</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the class initialized with the provided data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an instance of the class from a dictionary of attributes.</span>

<span class="sd">    This class method:</span>
<span class="sd">        - Copies the input dictionary to prevent modification of the original data.</span>
<span class="sd">        - Instantiates the class using the dictionary unpacked as keyword arguments.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (dict): Dictionary containing attributes to initialize the class instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        cls: An instance of the class initialized with the provided data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a copy of the data to avoid modifying the original</span>
    <span class="n">scenario_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># Create the scenario object</span>
    <span class="n">scenario</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">scenario_data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">scenario</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.Scenario.mobility_assign" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mobility_assign</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">mobile_participants_percent</span><span class="p">)</span></code>

<a href="#nebula.controller.scenarios.Scenario.mobility_assign" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Assign mobility status to a subset of nodes based on a specified percentage.</p>


<details class="this-method" open>
  <summary>This method</summary>
  <ul>
<li>Calculates the number of mobile nodes by applying the given percentage.</li>
<li>Randomly selects nodes to be marked as mobile.</li>
<li>Updates each node's "mobility" attribute to True or False accordingly.</li>
</ul>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>nodes</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of nodes with their current attributes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mobile_participants_percent</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percentage of nodes to be assigned mobility (0-100).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated nodes dictionary with mobility status assigned.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">mobility_assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">mobile_participants_percent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assign mobility status to a subset of nodes based on a specified percentage.</span>

<span class="sd">    This method:</span>
<span class="sd">        - Calculates the number of mobile nodes by applying the given percentage.</span>
<span class="sd">        - Randomly selects nodes to be marked as mobile.</span>
<span class="sd">        - Updates each node&#39;s &quot;mobility&quot; attribute to True or False accordingly.</span>

<span class="sd">    Args:</span>
<span class="sd">        nodes (dict): Dictionary of nodes with their current attributes.</span>
<span class="sd">        mobile_participants_percent (float): Percentage of nodes to be assigned mobility (0-100).</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Updated nodes dictionary with mobility status assigned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

    <span class="c1"># Number of mobile nodes, round down</span>
    <span class="n">num_mobile</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">mobile_participants_percent</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">num_mobile</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
        <span class="n">num_mobile</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

    <span class="c1"># Get the index of mobile nodes</span>
    <span class="n">mobile_nodes</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">num_mobile</span><span class="p">)</span>

    <span class="c1"># Assign the role of each node</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="n">node_mob</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">mobile_nodes</span><span class="p">:</span>
            <span class="n">node_mob</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;mobility&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_mob</span>
    <span class="k">return</span> <span class="n">nodes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nebula.controller.scenarios.ScenarioManagement" class="doc doc-heading">
            <code>ScenarioManagement</code>


<a href="#nebula.controller.scenarios.ScenarioManagement" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>Initialize the scenario management.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>scenario</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing the scenario configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>User identifier. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Functionality:
- Loads the scenario from a dictionary.
- Sets up names and paths for configuration and log storage.
- Creates necessary directories with proper permissions.
- Saves the scenario configuration and management settings as JSON files.
- Assigns malicious and mobile nodes according to scenario parameters.
- Configures each node individually with parameters for networking, device,
  attacks, defense, mobility, reporting, trustworthiness, and situational awareness.</p>







              <details class="quote">
                <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ScenarioManagement</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the scenario management.</span>

<span class="sd">    Args:</span>
<span class="sd">        scenario (dict): Dictionary containing the scenario configuration.</span>
<span class="sd">        user (str, optional): User identifier. Defaults to None.</span>

<span class="sd">    Functionality:</span>
<span class="sd">    - Loads the scenario from a dictionary.</span>
<span class="sd">    - Sets up names and paths for configuration and log storage.</span>
<span class="sd">    - Creates necessary directories with proper permissions.</span>
<span class="sd">    - Saves the scenario configuration and management settings as JSON files.</span>
<span class="sd">    - Assigns malicious and mobile nodes according to scenario parameters.</span>
<span class="sd">    - Configures each node individually with parameters for networking, device,</span>
<span class="sd">      attacks, defense, mobility, reporting, trustworthiness, and situational awareness.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Current scenario</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">scenario</span><span class="p">)</span>
        <span class="c1"># Uid of the user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
        <span class="c1"># Scenario management settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_date_scenario</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;nebula_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y_%m_</span><span class="si">%d</span><span class="s1">_%H_%M_%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_ROOT_HOST&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host_platform</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_HOST_PLATFORM&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_CERTS_DIR&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_analytics</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_ADVANCED_ANALYTICS&quot;</span><span class="p">,</span> <span class="s2">&quot;False&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="n">entity</span><span class="o">=</span><span class="s2">&quot;scenarioManagement&quot;</span><span class="p">)</span>

        <span class="c1"># If physical set the neighbours correctly</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;physical&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">physical_ips</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">ip</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">physical_ips</span><span class="p">):</span>
                <span class="n">node_key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">node_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node_key</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip</span>

        <span class="c1"># Assign the controller endpoint</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;docker&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_HOST&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_PORT&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;physical&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="s2">&quot;100.120.46.10:49152&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;127.0.0.1:</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_PORT&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Create Scenario management dirs</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Give permissions to the directories</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">),</span> <span class="mo">0o777</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>

        <span class="c1"># Save the scenario configuration</span>
        <span class="n">scenario_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="s2">&quot;scenario.json&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">scenario_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">scenario</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">scenario_file</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>

        <span class="c1"># Save management settings</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;scenario_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
            <span class="s2">&quot;root_path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
            <span class="s2">&quot;config_dir&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="s2">&quot;log_dir&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span><span class="p">,</span>
            <span class="s2">&quot;cert_dir&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">,</span>
            <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">settings_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="s2">&quot;settings.json&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">settings_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">settings_file</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>

        <span class="c1"># Get attack parameters from attack_params</span>
        <span class="n">poisoned_node_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_node_percent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">poisoned_sample_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_sample_percent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">poisoned_noise_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">attack_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;poisoned_noise_percent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">attack_node_assign</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span><span class="p">,</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">poisoned_node_percent</span><span class="p">),</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">poisoned_sample_percent</span><span class="p">),</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">poisoned_noise_percent</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">attack_params</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">mobility</span><span class="p">:</span>
            <span class="n">mobile_participants_percent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">mobile_participants_percent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">mobility_assign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">mobile_participants_percent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">mobility_assign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Save node settings</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="n">node_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
            <span class="n">participant_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">node_config</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">participant_file</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span>
                    <span class="s2">&quot;../frontend/config/participant.json.example&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">participant_file</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">participant_file</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">participant_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">participant_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;physical&quot;</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8000</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;port&quot;</span><span class="p">])</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;simulation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">network_simulation</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;proxy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;proxy&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;malicious&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;rounds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">rounds</span><span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;data_args&quot;</span><span class="p">][</span><span class="s2">&quot;dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">dataset</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;data_args&quot;</span><span class="p">][</span><span class="s2">&quot;iid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;data_args&quot;</span><span class="p">][</span><span class="s2">&quot;partition_selection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;data_args&quot;</span><span class="p">][</span><span class="s2">&quot;partition_parameter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;model_args&quot;</span><span class="p">][</span><span class="s2">&quot;model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">model</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;training_args&quot;</span><span class="p">][</span><span class="s2">&quot;epochs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">epochs</span><span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;accelerator&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">accelerator</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;gpu_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">gpu_id</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;logging&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">logginglevel</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;aggregator_args&quot;</span><span class="p">][</span><span class="s2">&quot;algorithm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">agg_algorithm</span>
            <span class="c1"># To be sure that benign nodes have no attack parameters</span>
            <span class="k">if</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;malicious&quot;</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;adversarial_args&quot;</span><span class="p">][</span><span class="s2">&quot;fake_behavior&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;fake_behavior&quot;</span><span class="p">]</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;adversarial_args&quot;</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;adversarial_args&quot;</span><span class="p">][</span><span class="s2">&quot;attack_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attacks&quot;</span><span class="p">:</span> <span class="s2">&quot;No Attack&quot;</span><span class="p">}</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;defense_args&quot;</span><span class="p">][</span><span class="s2">&quot;reputation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">reputation</span>

            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;random_geo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">random_geo</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;latitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">latitude</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;longitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">longitude</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;mobility&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_config</span><span class="p">[</span><span class="s2">&quot;mobility&quot;</span><span class="p">]</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;mobility_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">mobility_type</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;radius_federation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">radius_federation</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;scheme_mobility&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">scheme_mobility</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;round_frequency&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">round_frequency</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;reporter_args&quot;</span><span class="p">][</span><span class="s2">&quot;report_status_data_queue&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">report_status_data_queue</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;topology_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">with_sa</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;situational_awareness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;strict_topology&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">strict_topology</span><span class="p">,</span>
                    <span class="s2">&quot;sa_discovery&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;candidate_selector&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sad_candidate_selector</span><span class="p">,</span>
                        <span class="s2">&quot;model_handler&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sad_model_handler</span><span class="p">,</span>
                        <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;sa_reasoner&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;arbitration_policy&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sar_arbitration_policy</span><span class="p">,</span>
                        <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;sar_components&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;sa_network&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;sa_training&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sar_training</span><span class="p">},</span>
                        <span class="s2">&quot;sa_network&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;neighbor_policy&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sar_neighbor_policy</span><span class="p">,</span> <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                        <span class="s2">&quot;sa_training&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;training_policy&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sar_training_policy</span><span class="p">,</span> <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">}</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;trustworthiness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">with_trustworthiness</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">with_trustworthiness</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;trust_args&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;robustness_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">robustness_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;resilience_to_attacks&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">resilience_to_attacks</span><span class="p">,</span>
                    <span class="s2">&quot;algorithm_robustness&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">algorithm_robustness</span><span class="p">,</span>
                    <span class="s2">&quot;client_reliability&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">client_reliability</span><span class="p">,</span>
                    <span class="s2">&quot;privacy_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">privacy_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;technique&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">technique</span><span class="p">,</span>
                    <span class="s2">&quot;uncertainty&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span>
                    <span class="s2">&quot;indistinguishability&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">indistinguishability</span><span class="p">,</span>
                    <span class="s2">&quot;fairness_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">fairness_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;selection_fairness&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">selection_fairness</span><span class="p">,</span>
                    <span class="s2">&quot;performance_fairness&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">performance_fairness</span><span class="p">,</span>
                    <span class="s2">&quot;class_distribution&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">class_distribution</span><span class="p">,</span>
                    <span class="s2">&quot;explainability_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">explainability_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;interpretability&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">interpretability</span><span class="p">,</span>
                    <span class="s2">&quot;post_hoc_methods&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">post_hoc_methods</span><span class="p">,</span>
                    <span class="s2">&quot;accountability_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">accountability_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;factsheet_completeness&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">factsheet_completeness</span><span class="p">,</span>
                    <span class="s2">&quot;architectural_soundness_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">architectural_soundness_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;client_management&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">client_management</span><span class="p">,</span>
                    <span class="s2">&quot;optimization&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">optimization</span><span class="p">,</span>
                    <span class="s2">&quot;sustainability_pillar&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">sustainability_pillar</span><span class="p">,</span>
                    <span class="s2">&quot;energy_source&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">energy_source</span><span class="p">,</span>
                    <span class="s2">&quot;hardware_efficiency&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">hardware_efficiency</span><span class="p">,</span>
                    <span class="s2">&quot;federation_complexity&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation_complexity</span><span class="p">,</span>
                    <span class="s2">&quot;scenario&quot;</span><span class="p">:</span> <span class="n">scenario</span><span class="p">,</span>
                <span class="p">}</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">participant_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">participant_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop_participants</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop running participant nodes by removing the scenario command files.</span>

<span class="sd">        This method deletes the &#39;current_scenario_commands.sh&#39; (or &#39;.ps1&#39; on Windows)</span>
<span class="sd">        file associated with a scenario. Removing this file signals the nodes to stop</span>
<span class="sd">        by terminating their processes.</span>

<span class="sd">        Args:</span>
<span class="sd">            scenario_name (str, optional): The name of the scenario to stop. If None,</span>
<span class="sd">                all scenarios&#39; command files will be removed.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - If the environment variable NEBULA_CONFIG_DIR is not set, a default</span>
<span class="sd">              configuration directory path is used.</span>
<span class="sd">            - Supports both Linux/macOS (&#39;.sh&#39;) and Windows (&#39;.ps1&#39;) script files.</span>
<span class="sd">            - Any errors during file removal are logged with the traceback.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># When stopping the nodes, we need to remove the current_scenario_commands.sh file -&gt; it will cause the nodes to stop using PIDs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">nebula_config_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">nebula_config_dir</span><span class="p">:</span>
                <span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
                <span class="n">nebula_base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_dir</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">))</span>
                <span class="n">nebula_config_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_base_dir</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NEBULA_CONFIG_DIR not found. Using default path: </span><span class="si">{</span><span class="n">nebula_config_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">scenario_name</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_HOST_PLATFORM&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
                    <span class="n">scenario_commands_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">nebula_config_dir</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">,</span> <span class="s2">&quot;current_scenario_commands.ps1&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">scenario_commands_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">nebula_config_dir</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">,</span> <span class="s2">&quot;current_scenario_commands.sh&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">scenario_commands_file</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">scenario_commands_file</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_HOST_PLATFORM&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
                    <span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_config_dir</span><span class="p">,</span> <span class="s2">&quot;**/current_scenario_commands.ps1&quot;</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_config_dir</span><span class="p">,</span> <span class="s2">&quot;**/current_scenario_commands.sh&quot;</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>
                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while removing current_scenario_commands.sh file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop_nodes</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop all running NEBULA nodes.</span>

<span class="sd">        This method logs the shutdown action and calls the stop_participants</span>
<span class="sd">        method to remove all scenario command files, which signals nodes to stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Closing NEBULA nodes... Please wait&quot;</span><span class="p">)</span>
        <span class="n">ScenarioManagement</span><span class="o">.</span><span class="n">stop_participants</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">load_configurations_and_start_nodes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">additional_participants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema_additional_participants</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load participant configurations, generate certificates, setup topology, split datasets,</span>
<span class="sd">        and start nodes according to the scenario deployment type.</span>

<span class="sd">        This method:</span>
<span class="sd">        - Generates CA and node certificates.</span>
<span class="sd">        - Loads and updates participant configuration files.</span>
<span class="sd">        - Creates the network topology and updates participant roles.</span>
<span class="sd">        - Handles additional participants if provided.</span>
<span class="sd">        - Initializes and partitions the dataset based on the scenario.</span>
<span class="sd">        - Starts nodes using the specified deployment method (docker, physical, or process).</span>

<span class="sd">        Args:</span>
<span class="sd">            additional_participants (list, optional): List of additional participant configurations to add.</span>
<span class="sd">            schema_additional_participants (optional): Schema for additional participants (currently unused).</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If no participant files found, multiple start nodes detected, no start node found,</span>
<span class="sd">                        unsupported dataset or unknown deployment type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating the scenario </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date_scenario</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate CA certificate</span>
        <span class="n">generate_ca_certificate</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">)</span>

        <span class="c1"># Get participants configurations</span>
        <span class="n">participant_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_*.json&quot;</span><span class="p">)</span>
        <span class="n">participant_files</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No participant files found in config folder&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_participants_config</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_topology</span><span class="p">(</span><span class="n">matrix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">matrix</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_topology</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># Update participants configuration</span>
        <span class="n">is_start_node</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">config_participants</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># ap = len(additional_participants) if additional_participants else 0</span>
        <span class="n">additional_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">)</span> <span class="k">if</span> <span class="n">additional_participants</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;######## nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2"> + additionals: </span><span class="si">{</span><span class="n">additional_nodes</span><span class="si">}</span><span class="s2"> ######&quot;</span><span class="p">)</span>

        <span class="c1"># Sort participant files by index to ensure correct order</span>
        <span class="n">participant_files</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">participant_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;federation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;n_nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+</span> <span class="n">additional_nodes</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;neighbors&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">get_neighbors_string</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date_scenario</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">])</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">])</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;random_geo&quot;</span><span class="p">]:</span>
                <span class="p">(</span>
                    <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;latitude&quot;</span><span class="p">],</span>
                    <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;longitude&quot;</span><span class="p">],</span>
                <span class="p">)</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">(</span><span class="n">random_geo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;latitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">latitude</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;longitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">longitude</span>
            <span class="c1"># If not, use the given coordinates in the frontend</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;local_tracking&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;advanced&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_analytics</span> <span class="k">else</span> <span class="s2">&quot;basic&quot;</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span>

            <span class="c1"># Generate node certificate</span>
            <span class="n">keyfile_path</span><span class="p">,</span> <span class="n">certificate_path</span> <span class="o">=</span> <span class="n">generate_certificate</span><span class="p">(</span>
                <span class="n">dir_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">,</span>
                <span class="n">node_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">ip</span><span class="o">=</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
            <span class="p">)</span>

            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">certificate_path</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">keyfile_path</span>

            <span class="k">if</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_start_node</span><span class="p">:</span>
                    <span class="n">is_start_node</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only one node can be start node&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">participant_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">config_participants</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">],</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">],</span>
            <span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_start_node</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No start node found&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_participants_config</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>

        <span class="c1"># Add role to the topology (visualization purposes)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">update_nodes</span><span class="p">(</span><span class="n">config_participants</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">draw_graph</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/topology.png&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Include additional participants (if any) as copies of the last participant</span>
        <span class="n">additional_participants_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">additional_participants</span><span class="p">:</span>
            <span class="n">last_participant_file</span> <span class="o">=</span> <span class="n">participant_files</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">last_participant_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">additional_participant</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">):</span>
                <span class="n">additional_participant_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">last_participant_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="si">}</span><span class="s2">.json&quot;</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">last_participant_file</span><span class="p">,</span> <span class="n">additional_participant_file</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">participant_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration | additional nodes |  participant: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">last_ip</span> <span class="o">=</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valores de la ultima ip: (</span><span class="si">{</span><span class="n">last_ip</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;n_nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+</span> <span class="n">additional_nodes</span>  <span class="c1"># self.n_nodes + i + 1</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_participant_index</span> <span class="o">+</span> <span class="n">i</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;neighbors&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">])</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">])</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;additional_node&quot;</span><span class="p">][</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;additional_node&quot;</span><span class="p">][</span><span class="s2">&quot;time_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">additional_participant</span><span class="p">[</span>
                    <span class="s2">&quot;time_start&quot;</span>
                <span class="p">]</span>

                <span class="c1"># used for late creation nodes</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;late_creation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">participant_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

                <span class="n">additional_participants_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">additional_participants_files</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">add_participants_config</span><span class="p">(</span><span class="n">additional_participants_files</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">additional_participants</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">)</span>

        <span class="c1"># Splitting dataset</span>
        <span class="n">dataset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">dataset</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;MNIST&quot;</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">MNISTDataset</span><span class="p">(</span>
                <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
                <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
                <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
                <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;FashionMNIST&quot;</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">FashionMNISTDataset</span><span class="p">(</span>
                <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
                <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
                <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
                <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;EMNIST&quot;</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">EMNISTDataset</span><span class="p">(</span>
                <span class="n">num_classes</span><span class="o">=</span><span class="mi">47</span><span class="p">,</span>
                <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
                <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
                <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
                <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;CIFAR10&quot;</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">CIFAR10Dataset</span><span class="p">(</span>
                <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
                <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
                <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
                <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;CIFAR100&quot;</span><span class="p">:</span>
            <span class="n">dataset</span> <span class="o">=</span> <span class="n">CIFAR100Dataset</span><span class="p">(</span>
                <span class="n">num_classes</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
                <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
                <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
                <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dataset </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> not supported&quot;</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Splitting </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> dataset...&quot;</span><span class="p">)</span>
        <span class="n">dataset</span><span class="o">.</span><span class="n">initialize_dataset</span><span class="p">()</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Splitting </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> dataset... Done&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;physical&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;docker&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_docker</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;physical&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_physical</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;process&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_process</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown deployment type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Virtualization mode is disabled for scenario &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39; with </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2"> nodes. Waiting for nodes to start manually...&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create and return a network topology manager based on the scenario&#39;s topology settings or a given adjacency matrix.</span>

<span class="sd">        Supports multiple topology types:</span>
<span class="sd">        - Random: Generates an Erdős-Rényi random graph with specified connection probability.</span>
<span class="sd">        - Matrix: Uses a provided adjacency matrix to define the topology.</span>
<span class="sd">        - Fully: Creates a fully connected network.</span>
<span class="sd">        - Ring: Creates a ring-structured network with partial connectivity.</span>
<span class="sd">        - Star: Creates a centralized star topology (only for CFL federation).</span>

<span class="sd">        The method assigns IP and port information to nodes and returns the configured TopologyManager instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            matrix (optional): Adjacency matrix to define custom topology. If provided, overrides scenario topology.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an unknown topology type is specified in the scenario.</span>

<span class="sd">        Returns:</span>
<span class="sd">            TopologyManager: Configured topology manager with nodes assigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Random&quot;</span><span class="p">:</span>
            <span class="c1"># Create network topology using topology manager (random)</span>
            <span class="n">probability</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">random_topology_probability</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Creating random network topology using erdos_renyi_graph: nodes=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2">, probability=</span><span class="si">{</span><span class="n">probability</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_random_topology</span><span class="p">(</span><span class="n">probability</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                    <span class="n">topology</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span>
                    <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                    <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                    <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                    <span class="n">topology</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span>
                    <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                    <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                    <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Fully&quot;</span><span class="p">:</span>
            <span class="c1"># Create a fully connected network</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_topology</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Ring&quot;</span><span class="p">:</span>
            <span class="c1"># Create a partially connected network (ring-structured network)</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span> <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_ring_topology</span><span class="p">(</span><span class="n">increase_convergence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Star&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span> <span class="o">==</span> <span class="s2">&quot;CFL&quot;</span><span class="p">:</span>
            <span class="c1"># Create a centralized network</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span> <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_server_topology</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown topology type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Assign nodes to topology</span>
        <span class="n">nodes_ip_port</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
            <span class="n">nodes_ip_port</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
                <span class="n">node</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
                <span class="n">node</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">],</span>
                <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>
            <span class="p">))</span>

        <span class="n">topologymanager</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">(</span><span class="n">nodes_ip_port</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">topologymanager</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_docker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts participant nodes as Docker containers using Docker SDK.</span>

<span class="sd">        This method performs the following steps:</span>
<span class="sd">        - Logs the beginning of the Docker container startup process.</span>
<span class="sd">        - Creates a Docker network specific to the current user and scenario.</span>
<span class="sd">        - Sorts participant nodes by their index.</span>
<span class="sd">        - For each participant node:</span>
<span class="sd">            - Sets up environment variables and host configuration,</span>
<span class="sd">              enabling GPU support if required.</span>
<span class="sd">            - Prepares Docker volume bindings and static network IP assignment.</span>
<span class="sd">            - Updates the node configuration, replacing IP addresses as needed,</span>
<span class="sd">              and writes the configuration to a JSON file.</span>
<span class="sd">            - Creates and starts the Docker container for the node.</span>
<span class="sd">            - Logs any exceptions encountered during container creation or startup.</span>

<span class="sd">        Raises:</span>
<span class="sd">            docker.errors.DockerException: If there are issues communicating with the Docker daemon.</span>
<span class="sd">            OSError: If there are issues accessing file system paths for volume binding.</span>
<span class="sd">            Exception: For any other unexpected errors during container creation or startup.</span>

<span class="sd">        Note:</span>
<span class="sd">            - The method assumes Docker and NVIDIA runtime are properly installed and configured.</span>
<span class="sd">            - IP addresses in node configurations are replaced with network base dynamically.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes using Docker Compose...&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">network_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">-nebula-net-scenario&quot;</span>

        <span class="c1"># Create the Docker network</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">DockerUtils</span><span class="o">.</span><span class="n">create_docker_network</span><span class="p">(</span><span class="n">network_name</span><span class="p">)</span>

        <span class="n">client</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">])</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">container_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="s2">&quot;nebula-core&quot;</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">-participant</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;accelerator&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;gpu&quot;</span><span class="p">:</span>
                <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;NVIDIA_DISABLE_REQUIRE&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/logs/&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/config/&quot;</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="n">host_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_host_config</span><span class="p">(</span>
                    <span class="n">binds</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">:/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="p">],</span>
                    <span class="n">privileged</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">device_requests</span><span class="o">=</span><span class="p">[</span><span class="n">docker</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">DeviceRequest</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="s2">&quot;nvidia&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">capabilities</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;gpu&quot;</span><span class="p">]])],</span>
                    <span class="n">extra_hosts</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host.docker.internal&quot;</span><span class="p">:</span> <span class="s2">&quot;host-gateway&quot;</span><span class="p">},</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/logs/&quot;</span><span class="p">,</span> <span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/config/&quot;</span><span class="p">}</span>
                <span class="n">host_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_host_config</span><span class="p">(</span>
                    <span class="n">binds</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">:/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="p">],</span>
                    <span class="n">privileged</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">device_requests</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">extra_hosts</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host.docker.internal&quot;</span><span class="p">:</span> <span class="s2">&quot;host-gateway&quot;</span><span class="p">},</span>
                <span class="p">)</span>

            <span class="n">volumes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock&quot;</span><span class="p">]</span>

            <span class="n">start_command</span> <span class="o">=</span> <span class="s2">&quot;sleep 10&quot;</span> <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;sleep 0&quot;</span>
            <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-c&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">start_command</span><span class="si">}</span><span class="s2"> &amp;&amp; ifconfig &amp;&amp; echo &#39;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.1 host.docker.internal&#39; &gt;&gt; /etc/hosts &amp;&amp; python /nebula/nebula/core/node.py /nebula/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span>
            <span class="p">]</span>

            <span class="n">networking_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_networking_config</span><span class="p">({</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">network_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_endpoint_config</span><span class="p">(</span>
                    <span class="n">ipv4_address</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_nebula-net-base&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_endpoint_config</span><span class="p">(),</span>
            <span class="p">})</span>

            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/nebula/app/logs&quot;</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;controller&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;deployment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/certs/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_cert.pem&quot;</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/certs/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_key.pem&quot;</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;cafile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/nebula/app/certs/ca_cert.pem&quot;</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;192.168.50.&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">))</span>  <span class="c1"># TODO change this</span>

            <span class="c1"># Write the config file in config directory</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">container_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_container</span><span class="p">(</span>
                    <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">detach</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">volumes</span><span class="o">=</span><span class="n">volumes</span><span class="p">,</span>
                    <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                    <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                    <span class="n">host_config</span><span class="o">=</span><span class="n">host_config</span><span class="p">,</span>
                    <span class="n">networking_config</span><span class="o">=</span><span class="n">networking_config</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating container </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">container_id</span><span class="p">)</span>
                <span class="n">container_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container_id</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting participant </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts participant nodes as independent background processes on the host machine.</span>

<span class="sd">        This method performs the following steps:</span>
<span class="sd">        - Updates each participant&#39;s configuration with paths for logs, config, certificates,</span>
<span class="sd">          and scenario parameters.</span>
<span class="sd">        - Writes the updated configuration for each participant to a JSON file.</span>
<span class="sd">        - Generates and writes a platform-specific script to start all participant nodes:</span>
<span class="sd">            - On Windows, it creates a PowerShell script that launches each node as a background</span>
<span class="sd">              process, redirects output and error streams to log files, and records process IDs.</span>
<span class="sd">            - On Unix-like systems, it creates a bash script that launches each node in the</span>
<span class="sd">              background, redirects output, and stores PIDs in a file.</span>
<span class="sd">        - Sets executable permissions for the generated script.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs during the script generation or file operations.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The generated script must be executed separately by the user to actually start the nodes.</span>
<span class="sd">            - Sleep intervals are added before starting nodes depending on their &#39;start&#39; flag.</span>
<span class="sd">            - Logs and PIDs are stored under the configured directories for monitoring and management.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processes_root_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes as processes...&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Include additional config to the participants</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;logs&quot;</span><span class="p">)</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;controller&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;deployment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_cert.pem&quot;</span>
            <span class="p">)</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_key.pem&quot;</span>
            <span class="p">)</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;cafile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="s2">&quot;ca_cert.pem&quot;</span><span class="p">)</span>

            <span class="c1"># Write the config file in config directory</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_platform</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
                <span class="n">commands</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                $ParentDir = Split-Path -Parent $PSScriptRoot</span>
<span class="s2">                $PID_FILE = &quot;$PSScriptRoot</span><span class="se">\\</span><span class="s2">current_scenario_pids.txt&quot;</span>
<span class="s2">                New-Item -Path $PID_FILE -Force -ItemType File</span>

<span class="s2">                &quot;&quot;&quot;</span>
                <span class="n">sorted_participants</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">,</span>
                    <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">],</span>
                    <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">sorted_participants</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
                        <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;Start-Sleep -Seconds 10</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;Start-Sleep -Seconds 2</span><span class="se">\n</span><span class="s2">&quot;</span>

                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;Write-Host &quot;Running node </span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">...&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;$OUT_FILE = &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s1">app</span><span class="se">\\</span><span class="s1">logs</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s1">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">.out&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;$ERROR_FILE = &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s1">app</span><span class="se">\\</span><span class="s1">logs</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s1">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">.err&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

                    <span class="c1"># Use Start-Process for executing Python in background and capture PID</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;$process = Start-Process -FilePath &quot;python&quot; -ArgumentList &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s2">nebula</span><span class="se">\\</span><span class="s2">core</span><span class="se">\\</span><span class="s2">node.py </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s2">app</span><span class="se">\\</span><span class="s2">config</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s2">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot; -PassThru -NoNewWindow -RedirectStandardOutput $OUT_FILE -RedirectStandardError $ERROR_FILE</span>
<span class="s2">                Add-Content -Path $PID_FILE -Value $process.Id</span>
<span class="s2">                &quot;&quot;&quot;</span>

                <span class="n">commands</span> <span class="o">+=</span> <span class="s1">&#39;Write-Host &quot;All nodes started. PIDs stored in $PID_FILE&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.ps1&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">commands</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.ps1&quot;</span><span class="p">,</span> <span class="mo">0o755</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">commands</span> <span class="o">=</span> <span class="s1">&#39;#!/bin/bash</span><span class="se">\n\n</span><span class="s1">PID_FILE=&quot;$(dirname &quot;$0&quot;)/current_scenario_pids.txt&quot;</span><span class="se">\n\n</span><span class="s1">&gt; $PID_FILE</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                <span class="n">sorted_participants</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">,</span>
                    <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">],</span>
                    <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">sorted_participants</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
                        <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;sleep 10</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;sleep 2</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;echo &quot;Running node </span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">...&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;OUT_FILE=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/app/logs/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.out</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;python </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/nebula/core/node.py </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json &amp;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;echo $! &gt;&gt; $PID_FILE</span><span class="se">\n\n</span><span class="s2">&quot;</span>

                <span class="n">commands</span> <span class="o">+=</span> <span class="s1">&#39;echo &quot;All nodes started. PIDs stored in $PID_FILE&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">commands</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.sh&quot;</span><span class="p">,</span> <span class="mo">0o755</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error starting nodes as processes: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_upload_and_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_cfg</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">node_cfg</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span>
        <span class="n">port</span> <span class="o">=</span> <span class="n">node_cfg</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
        <span class="n">host</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">node_cfg</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span>

        <span class="n">cfg_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span>
        <span class="n">config_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cfg_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="n">global_test_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cfg_dir</span><span class="si">}</span><span class="s2">/global_test.h5&quot;</span>
        <span class="n">train_set_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cfg_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">_train.h5&quot;</span>

        <span class="c1"># ---------- multipart/form-data ------------------------</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">FormData</span><span class="p">()</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span>
            <span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">),</span> <span class="n">filename</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">config_path</span><span class="p">),</span> <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;application/json&quot;</span>
        <span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span>
            <span class="s2">&quot;global_test&quot;</span><span class="p">,</span>
            <span class="nb">open</span><span class="p">(</span><span class="n">global_test_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">),</span>
            <span class="n">filename</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">global_test_path</span><span class="p">),</span>
            <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;application/octet-stream&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">add_field</span><span class="p">(</span>
            <span class="s2">&quot;train_set&quot;</span><span class="p">,</span>
            <span class="nb">open</span><span class="p">(</span><span class="n">train_set_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">),</span>
            <span class="n">filename</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">train_set_path</span><span class="p">),</span>
            <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;application/octet-stream&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># ---------- /physical/setup/ (PUT) ---------------------</span>
        <span class="n">setup_ep</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/physical/setup/</span><span class="si">{</span><span class="n">quote</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">st</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">remote_post_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="p">,</span> <span class="n">setup_ep</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;PUT&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">st</span> <span class="o">!=</span> <span class="mi">201</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">] setup failed </span><span class="si">{</span><span class="n">st</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># ---------- /physical/run/ (GET) ------------------------</span>
        <span class="n">run_ep</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/physical/run/</span><span class="si">{</span><span class="n">quote</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">st</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">remote_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="p">,</span> <span class="n">run_ep</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">st</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s2">] run failed </span><span class="si">{</span><span class="n">st</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Node </span><span class="si">%s</span><span class="s2"> running: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_physical</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Placeholder method for starting nodes on physical devices.</span>

<span class="sd">        Logs informational messages indicating that deployment on physical devices</span>
<span class="sd">        is not implemented or supported publicly. Users are encouraged to use Docker</span>
<span class="sd">        or process-based deployment methods instead.</span>

<span class="sd">        Currently, this method does not perform any actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes as physical devices...&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_start</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Physical devices deployment is not implemented publicly. Please use docker or process deployment.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_files_by_scenario</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove configuration, logs, and reputation files associated with a given scenario.</span>

<span class="sd">        This method attempts to delete the directories related to the specified scenario</span>
<span class="sd">        within the NEBULA_CONFIG_DIR and NEBULA_LOGS_DIR environment paths, as well as</span>
<span class="sd">        the reputation folder inside the nebula core directory.</span>

<span class="sd">        If files or directories are not found, a warning is logged but the method continues.</span>
<span class="sd">        If a PermissionError occurs while removing log files, the files are moved to a temporary</span>
<span class="sd">        folder inside the NEBULA_ROOT path to avoid permission issues.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: Re-raises any unexpected exceptions encountered during file operations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found, nothing to remove&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files&quot;</span><span class="p">)</span>
            <span class="k">raise</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="c1"># Avoid error if the user does not have enough permissions to remove the tf.events files</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Not enough permissions to remove the files, moving them to tmp folder&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span>
                <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
                <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span>
                <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
                <span class="mo">0o777</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span>
                <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">),</span>
                <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found, nothing to remove&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files&quot;</span><span class="p">)</span>

            <span class="k">raise</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">nebula_reputation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;reputation&quot;</span><span class="p">,</span> <span class="n">scenario_name</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">nebula_reputation</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">nebula_reputation</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reputation folder </span><span class="si">{</span><span class="n">nebula_reputation</span><span class="si">}</span><span class="s2"> removed successfully&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found in reputation folder, nothing to remove&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files from reputation folder&quot;</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">scenario_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if all Docker containers related to the current scenario have finished.</span>

<span class="sd">        This method monitors the Docker containers whose names contain the scenario name.</span>
<span class="sd">        It waits until all such containers have exited or until the specified timeout is reached.</span>
<span class="sd">        If the timeout is exceeded, all running scenario containers are stopped.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout_seconds (int): Maximum number of seconds to wait for containers to finish.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if all containers finished before the timeout, False if timeout was reached and containers were stopped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span>
        <span class="n">all_containers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">containers</span> <span class="o">=</span> <span class="p">[</span><span class="n">container</span> <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">all_containers</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">all_containers_finished</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="s2">&quot;exited&quot;</span><span class="p">:</span>
                    <span class="n">all_containers_finished</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">all_containers_finished</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

            <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="k">if</span> <span class="n">elapsed_time</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">timeout_seconds</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers</span><span class="p">:</span>
                    <span class="n">container</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.create_topology" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_topology</span><span class="p">(</span><span class="n">matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nebula.controller.scenarios.ScenarioManagement.create_topology" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Create and return a network topology manager based on the scenario's topology settings or a given adjacency matrix.</p>
<p>Supports multiple topology types:
- Random: Generates an Erdős-Rényi random graph with specified connection probability.
- Matrix: Uses a provided adjacency matrix to define the topology.
- Fully: Creates a fully connected network.
- Ring: Creates a ring-structured network with partial connectivity.
- Star: Creates a centralized star topology (only for CFL federation).</p>
<p>The method assigns IP and port information to nodes and returns the configured TopologyManager instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>matrix</code>
            </td>
            <td>
                  <code><span title="optional">optional</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Adjacency matrix to define custom topology. If provided, overrides scenario topology.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unknown topology type is specified in the scenario.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>TopologyManager</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configured topology manager with nodes assigned.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create and return a network topology manager based on the scenario&#39;s topology settings or a given adjacency matrix.</span>

<span class="sd">    Supports multiple topology types:</span>
<span class="sd">    - Random: Generates an Erdős-Rényi random graph with specified connection probability.</span>
<span class="sd">    - Matrix: Uses a provided adjacency matrix to define the topology.</span>
<span class="sd">    - Fully: Creates a fully connected network.</span>
<span class="sd">    - Ring: Creates a ring-structured network with partial connectivity.</span>
<span class="sd">    - Star: Creates a centralized star topology (only for CFL federation).</span>

<span class="sd">    The method assigns IP and port information to nodes and returns the configured TopologyManager instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        matrix (optional): Adjacency matrix to define custom topology. If provided, overrides scenario topology.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If an unknown topology type is specified in the scenario.</span>

<span class="sd">    Returns:</span>
<span class="sd">        TopologyManager: Configured topology manager with nodes assigned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Random&quot;</span><span class="p">:</span>
        <span class="c1"># Create network topology using topology manager (random)</span>
        <span class="n">probability</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">random_topology_probability</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Creating random network topology using erdos_renyi_graph: nodes=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2">, probability=</span><span class="si">{</span><span class="n">probability</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
            <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
            <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_random_topology</span><span class="p">(</span><span class="n">probability</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                <span class="n">topology</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span>
                <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
                <span class="n">topology</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrix</span><span class="p">),</span>
                <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
                <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
                <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Fully&quot;</span><span class="p">:</span>
        <span class="c1"># Create a fully connected network</span>
        <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span>
            <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span>
            <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">undirected_neighbor_num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_topology</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Ring&quot;</span><span class="p">:</span>
        <span class="c1"># Create a partially connected network (ring-structured network)</span>
        <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span> <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_ring_topology</span><span class="p">(</span><span class="n">increase_convergence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span> <span class="o">==</span> <span class="s2">&quot;Star&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span> <span class="o">==</span> <span class="s2">&quot;CFL&quot;</span><span class="p">:</span>
        <span class="c1"># Create a centralized network</span>
        <span class="n">topologymanager</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">n_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span> <span class="n">b_symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">topologymanager</span><span class="o">.</span><span class="n">generate_server_topology</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown topology type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">topology</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Assign nodes to topology</span>
    <span class="n">nodes_ip_port</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
        <span class="n">nodes_ip_port</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
            <span class="n">node</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">],</span>
            <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>
        <span class="p">))</span>

    <span class="n">topologymanager</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">(</span><span class="n">nodes_ip_port</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">topologymanager</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.load_configurations_and_start_nodes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_configurations_and_start_nodes</span><span class="p">(</span><span class="n">additional_participants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema_additional_participants</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#nebula.controller.scenarios.ScenarioManagement.load_configurations_and_start_nodes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Load participant configurations, generate certificates, setup topology, split datasets,
and start nodes according to the scenario deployment type.</p>
<p>This method:
- Generates CA and node certificates.
- Loads and updates participant configuration files.
- Creates the network topology and updates participant roles.
- Handles additional participants if provided.
- Initializes and partitions the dataset based on the scenario.
- Starts nodes using the specified deployment method (docker, physical, or process).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>additional_participants</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of additional participant configurations to add.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema_additional_participants</code>
            </td>
            <td>
                  <code><span title="optional">optional</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema for additional participants (currently unused).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no participant files found, multiple start nodes detected, no start node found,
        unsupported dataset or unknown deployment type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">load_configurations_and_start_nodes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">additional_participants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema_additional_participants</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load participant configurations, generate certificates, setup topology, split datasets,</span>
<span class="sd">    and start nodes according to the scenario deployment type.</span>

<span class="sd">    This method:</span>
<span class="sd">    - Generates CA and node certificates.</span>
<span class="sd">    - Loads and updates participant configuration files.</span>
<span class="sd">    - Creates the network topology and updates participant roles.</span>
<span class="sd">    - Handles additional participants if provided.</span>
<span class="sd">    - Initializes and partitions the dataset based on the scenario.</span>
<span class="sd">    - Starts nodes using the specified deployment method (docker, physical, or process).</span>

<span class="sd">    Args:</span>
<span class="sd">        additional_participants (list, optional): List of additional participant configurations to add.</span>
<span class="sd">        schema_additional_participants (optional): Schema for additional participants (currently unused).</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If no participant files found, multiple start nodes detected, no start node found,</span>
<span class="sd">                    unsupported dataset or unknown deployment type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating the scenario </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date_scenario</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate CA certificate</span>
    <span class="n">generate_ca_certificate</span><span class="p">(</span><span class="n">dir_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">)</span>

    <span class="c1"># Get participants configurations</span>
    <span class="n">participant_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_*.json&quot;</span><span class="p">)</span>
    <span class="n">participant_files</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No participant files found in config folder&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_participants_config</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_topology</span><span class="p">(</span><span class="n">matrix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">matrix</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_topology</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Update participants configuration</span>
    <span class="n">is_start_node</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">config_participants</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># ap = len(additional_participants) if additional_participants else 0</span>
    <span class="n">additional_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">)</span> <span class="k">if</span> <span class="n">additional_participants</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;######## nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2"> + additionals: </span><span class="si">{</span><span class="n">additional_nodes</span><span class="si">}</span><span class="s2"> ######&quot;</span><span class="p">)</span>

    <span class="c1"># Sort participant files by index to ensure correct order</span>
    <span class="n">participant_files</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">participant_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;federation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">federation</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;n_nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+</span> <span class="n">additional_nodes</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;neighbors&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">get_neighbors_string</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;start_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date_scenario</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">])</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">])</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;random_geo&quot;</span><span class="p">]:</span>
            <span class="p">(</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;latitude&quot;</span><span class="p">],</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;longitude&quot;</span><span class="p">],</span>
            <span class="p">)</span> <span class="o">=</span> <span class="n">TopologyManager</span><span class="o">.</span><span class="n">get_coordinates</span><span class="p">(</span><span class="n">random_geo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;latitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">latitude</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;longitude&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">longitude</span>
        <span class="c1"># If not, use the given coordinates in the frontend</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;local_tracking&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;advanced&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_analytics</span> <span class="k">else</span> <span class="s2">&quot;basic&quot;</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_dir</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span>

        <span class="c1"># Generate node certificate</span>
        <span class="n">keyfile_path</span><span class="p">,</span> <span class="n">certificate_path</span> <span class="o">=</span> <span class="n">generate_certificate</span><span class="p">(</span>
            <span class="n">dir_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_dir</span><span class="p">,</span>
            <span class="n">node_id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">ip</span><span class="o">=</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">certificate_path</span>
        <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">keyfile_path</span>

        <span class="k">if</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_start_node</span><span class="p">:</span>
                <span class="n">is_start_node</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only one node can be start node&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">participant_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">config_participants</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">],</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">],</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;role&quot;</span><span class="p">],</span>
        <span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_start_node</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No start node found&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set_participants_config</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>

    <span class="c1"># Add role to the topology (visualization purposes)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">update_nodes</span><span class="p">(</span><span class="n">config_participants</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">topologymanager</span><span class="o">.</span><span class="n">draw_graph</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/topology.png&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Include additional participants (if any) as copies of the last participant</span>
    <span class="n">additional_participants_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">additional_participants</span><span class="p">:</span>
        <span class="n">last_participant_file</span> <span class="o">=</span> <span class="n">participant_files</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">last_participant_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">participant_files</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">additional_participant</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">):</span>
            <span class="n">additional_participant_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">last_participant_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="si">}</span><span class="s2">.json&quot;</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">last_participant_file</span><span class="p">,</span> <span class="n">additional_participant_file</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">participant_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration | additional nodes |  participant: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">last_ip</span> <span class="o">=</span> <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valores de la ultima ip: (</span><span class="si">{</span><span class="n">last_ip</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;n_nodes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+</span> <span class="n">additional_nodes</span>  <span class="c1"># self.n_nodes + i + 1</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_participant_index</span> <span class="o">+</span> <span class="n">i</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;neighbors&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;ip&quot;</span><span class="p">])</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;network_args&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">])</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;additional_node&quot;</span><span class="p">][</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;additional_node&quot;</span><span class="p">][</span><span class="s2">&quot;time_start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">additional_participant</span><span class="p">[</span>
                <span class="s2">&quot;time_start&quot;</span>
            <span class="p">]</span>

            <span class="c1"># used for late creation nodes</span>
            <span class="n">participant_config</span><span class="p">[</span><span class="s2">&quot;mobility_args&quot;</span><span class="p">][</span><span class="s2">&quot;late_creation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">participant_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">additional_participants_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">additional_participant_file</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">additional_participants_files</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">add_participants_config</span><span class="p">(</span><span class="n">additional_participants_files</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">additional_participants</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">additional_participants</span><span class="p">)</span>

    <span class="c1"># Splitting dataset</span>
    <span class="n">dataset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">dataset</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;MNIST&quot;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">MNISTDataset</span><span class="p">(</span>
            <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
            <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
            <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;FashionMNIST&quot;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">FashionMNISTDataset</span><span class="p">(</span>
            <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
            <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
            <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;EMNIST&quot;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">EMNISTDataset</span><span class="p">(</span>
            <span class="n">num_classes</span><span class="o">=</span><span class="mi">47</span><span class="p">,</span>
            <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
            <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
            <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;CIFAR10&quot;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">CIFAR10Dataset</span><span class="p">(</span>
            <span class="n">num_classes</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
            <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
            <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;CIFAR100&quot;</span><span class="p">:</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">CIFAR100Dataset</span><span class="p">(</span>
            <span class="n">num_classes</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">partitions_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="p">,</span>
            <span class="n">iid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">iid</span><span class="p">,</span>
            <span class="n">partition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_selection</span><span class="p">,</span>
            <span class="n">partition_parameter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">partition_parameter</span><span class="p">,</span>
            <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
            <span class="n">config_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dataset </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> not supported&quot;</span><span class="p">)</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Splitting </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> dataset...&quot;</span><span class="p">)</span>
    <span class="n">dataset</span><span class="o">.</span><span class="n">initialize_dataset</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Splitting </span><span class="si">{</span><span class="n">dataset_name</span><span class="si">}</span><span class="s2"> dataset... Done&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;physical&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;docker&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_docker</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;physical&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_physical</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span> <span class="o">==</span> <span class="s2">&quot;process&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_nodes_process</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown deployment type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Virtualization mode is disabled for scenario &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39; with </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_nodes</span><span class="si">}</span><span class="s2"> nodes. Waiting for nodes to start manually...&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.remove_files_by_scenario" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_files_by_scenario</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#nebula.controller.scenarios.ScenarioManagement.remove_files_by_scenario" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Remove configuration, logs, and reputation files associated with a given scenario.</p>
<p>This method attempts to delete the directories related to the specified scenario
within the NEBULA_CONFIG_DIR and NEBULA_LOGS_DIR environment paths, as well as
the reputation folder inside the nebula core directory.</p>
<p>If files or directories are not found, a warning is logged but the method continues.
If a PermissionError occurs while removing log files, the files are moved to a temporary
folder inside the NEBULA_ROOT path to avoid permission issues.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Re-raises any unexpected exceptions encountered during file operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">remove_files_by_scenario</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove configuration, logs, and reputation files associated with a given scenario.</span>

<span class="sd">    This method attempts to delete the directories related to the specified scenario</span>
<span class="sd">    within the NEBULA_CONFIG_DIR and NEBULA_LOGS_DIR environment paths, as well as</span>
<span class="sd">    the reputation folder inside the nebula core directory.</span>

<span class="sd">    If files or directories are not found, a warning is logged but the method continues.</span>
<span class="sd">    If a PermissionError occurs while removing log files, the files are moved to a temporary</span>
<span class="sd">    folder inside the NEBULA_ROOT path to avoid permission issues.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: Re-raises any unexpected exceptions encountered during file operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found, nothing to remove&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
        <span class="c1"># Avoid error if the user does not have enough permissions to remove the tf.events files</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Not enough permissions to remove the files, moving them to tmp folder&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span>
            <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
            <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span>
            <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
            <span class="mo">0o777</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span>
            <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="n">scenario_name</span><span class="p">),</span>
            <span class="n">FileUtils</span><span class="o">.</span><span class="n">check_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_ROOT&quot;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found, nothing to remove&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files&quot;</span><span class="p">)</span>

        <span class="k">raise</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">nebula_reputation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">],</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;reputation&quot;</span><span class="p">,</span> <span class="n">scenario_name</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">nebula_reputation</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">nebula_reputation</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reputation folder </span><span class="si">{</span><span class="n">nebula_reputation</span><span class="si">}</span><span class="s2"> removed successfully&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Files not found in reputation folder, nothing to remove&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unknown error while removing files from reputation folder&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.scenario_finished" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">scenario_finished</span><span class="p">(</span><span class="n">timeout_seconds</span><span class="p">)</span></code>

<a href="#nebula.controller.scenarios.ScenarioManagement.scenario_finished" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if all Docker containers related to the current scenario have finished.</p>
<p>This method monitors the Docker containers whose names contain the scenario name.
It waits until all such containers have exited or until the specified timeout is reached.
If the timeout is exceeded, all running scenario containers are stopped.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout_seconds</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of seconds to wait for containers to finish.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if all containers finished before the timeout, False if timeout was reached and containers were stopped.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">scenario_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if all Docker containers related to the current scenario have finished.</span>

<span class="sd">    This method monitors the Docker containers whose names contain the scenario name.</span>
<span class="sd">    It waits until all such containers have exited or until the specified timeout is reached.</span>
<span class="sd">    If the timeout is exceeded, all running scenario containers are stopped.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout_seconds (int): Maximum number of seconds to wait for containers to finish.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if all containers finished before the timeout, False if timeout was reached and containers were stopped.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span>
    <span class="n">all_containers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">containers</span> <span class="o">=</span> <span class="p">[</span><span class="n">container</span> <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">all_containers</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">container</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>

    <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">all_containers_finished</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="s2">&quot;exited&quot;</span><span class="p">:</span>
                <span class="n">all_containers_finished</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">all_containers_finished</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="k">if</span> <span class="n">elapsed_time</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">timeout_seconds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">containers</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.start_nodes_docker" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_nodes_docker</span><span class="p">()</span></code>

<a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_docker" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Starts participant nodes as Docker containers using Docker SDK.</p>
<p>This method performs the following steps:
- Logs the beginning of the Docker container startup process.
- Creates a Docker network specific to the current user and scenario.
- Sorts participant nodes by their index.
- For each participant node:
    - Sets up environment variables and host configuration,
      enabling GPU support if required.
    - Prepares Docker volume bindings and static network IP assignment.
    - Updates the node configuration, replacing IP addresses as needed,
      and writes the configuration to a JSON file.
    - Creates and starts the Docker container for the node.
    - Logs any exceptions encountered during container creation or startup.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="docker.errors.DockerException">DockerException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there are issues communicating with the Docker daemon.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="OSError">OSError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there are issues accessing file system paths for volume binding.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>For any other unexpected errors during container creation or startup.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>The method assumes Docker and NVIDIA runtime are properly installed and configured.</li>
<li>IP addresses in node configurations are replaced with network base dynamically.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_docker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts participant nodes as Docker containers using Docker SDK.</span>

<span class="sd">    This method performs the following steps:</span>
<span class="sd">    - Logs the beginning of the Docker container startup process.</span>
<span class="sd">    - Creates a Docker network specific to the current user and scenario.</span>
<span class="sd">    - Sorts participant nodes by their index.</span>
<span class="sd">    - For each participant node:</span>
<span class="sd">        - Sets up environment variables and host configuration,</span>
<span class="sd">          enabling GPU support if required.</span>
<span class="sd">        - Prepares Docker volume bindings and static network IP assignment.</span>
<span class="sd">        - Updates the node configuration, replacing IP addresses as needed,</span>
<span class="sd">          and writes the configuration to a JSON file.</span>
<span class="sd">        - Creates and starts the Docker container for the node.</span>
<span class="sd">        - Logs any exceptions encountered during container creation or startup.</span>

<span class="sd">    Raises:</span>
<span class="sd">        docker.errors.DockerException: If there are issues communicating with the Docker daemon.</span>
<span class="sd">        OSError: If there are issues accessing file system paths for volume binding.</span>
<span class="sd">        Exception: For any other unexpected errors during container creation or startup.</span>

<span class="sd">    Note:</span>
<span class="sd">        - The method assumes Docker and NVIDIA runtime are properly installed and configured.</span>
<span class="sd">        - IP addresses in node configurations are replaced with network base dynamically.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes using Docker Compose...&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">network_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">-nebula-net-scenario&quot;</span>

    <span class="c1"># Create the Docker network</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">DockerUtils</span><span class="o">.</span><span class="n">create_docker_network</span><span class="p">(</span><span class="n">network_name</span><span class="p">)</span>

    <span class="n">client</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">container_ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="s2">&quot;nebula-core&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">-participant</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;accelerator&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;gpu&quot;</span><span class="p">:</span>
            <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;NVIDIA_DISABLE_REQUIRE&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/logs/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/config/&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">host_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_host_config</span><span class="p">(</span>
                <span class="n">binds</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">:/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="p">],</span>
                <span class="n">privileged</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">device_requests</span><span class="o">=</span><span class="p">[</span><span class="n">docker</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">DeviceRequest</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="s2">&quot;nvidia&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">capabilities</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;gpu&quot;</span><span class="p">]])],</span>
                <span class="n">extra_hosts</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host.docker.internal&quot;</span><span class="p">:</span> <span class="s2">&quot;host-gateway&quot;</span><span class="p">},</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;NEBULA_LOGS_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/logs/&quot;</span><span class="p">,</span> <span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">:</span> <span class="s2">&quot;/nebula/app/config/&quot;</span><span class="p">}</span>
            <span class="n">host_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_host_config</span><span class="p">(</span>
                <span class="n">binds</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">:/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="p">],</span>
                <span class="n">privileged</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">device_requests</span><span class="o">=</span><span class="p">[],</span>
                <span class="n">extra_hosts</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host.docker.internal&quot;</span><span class="p">:</span> <span class="s2">&quot;host-gateway&quot;</span><span class="p">},</span>
            <span class="p">)</span>

        <span class="n">volumes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/nebula&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/run/docker.sock&quot;</span><span class="p">]</span>

        <span class="n">start_command</span> <span class="o">=</span> <span class="s2">&quot;sleep 10&quot;</span> <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;sleep 0&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-c&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">start_command</span><span class="si">}</span><span class="s2"> &amp;&amp; ifconfig &amp;&amp; echo &#39;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.1 host.docker.internal&#39; &gt;&gt; /etc/hosts &amp;&amp; python /nebula/nebula/core/node.py /nebula/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">networking_config</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_networking_config</span><span class="p">({</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">network_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_endpoint_config</span><span class="p">(</span>
                <span class="n">ipv4_address</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NEBULA_CONTROLLER_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">_nebula-net-base&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_endpoint_config</span><span class="p">(),</span>
        <span class="p">})</span>

        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/nebula/app/logs&quot;</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;controller&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;deployment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/certs/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_cert.pem&quot;</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/nebula/app/certs/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_key.pem&quot;</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;cafile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/nebula/app/certs/ca_cert.pem&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;192.168.50.&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">))</span>  <span class="c1"># TODO change this</span>

        <span class="c1"># Write the config file in config directory</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">container_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">create_container</span><span class="p">(</span>
                <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">detach</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">volumes</span><span class="o">=</span><span class="n">volumes</span><span class="p">,</span>
                <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span>
                <span class="n">host_config</span><span class="o">=</span><span class="n">host_config</span><span class="p">,</span>
                <span class="n">networking_config</span><span class="o">=</span><span class="n">networking_config</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating container </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">client</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">container_id</span><span class="p">)</span>
            <span class="n">container_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting participant </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.start_nodes_physical" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_nodes_physical</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_physical" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Placeholder method for starting nodes on physical devices.</p>
<p>Logs informational messages indicating that deployment on physical devices
is not implemented or supported publicly. Users are encouraged to use Docker
or process-based deployment methods instead.</p>
<p>Currently, this method does not perform any actions.</p>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_physical</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Placeholder method for starting nodes on physical devices.</span>

<span class="sd">    Logs informational messages indicating that deployment on physical devices</span>
<span class="sd">    is not implemented or supported publicly. Users are encouraged to use Docker</span>
<span class="sd">    or process-based deployment methods instead.</span>

<span class="sd">    Currently, this method does not perform any actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes as physical devices...&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_upload_and_start</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Physical devices deployment is not implemented publicly. Please use docker or process deployment.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.start_nodes_process" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_nodes_process</span><span class="p">()</span></code>

<a href="#nebula.controller.scenarios.ScenarioManagement.start_nodes_process" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Starts participant nodes as independent background processes on the host machine.</p>
<p>This method performs the following steps:
- Updates each participant's configuration with paths for logs, config, certificates,
  and scenario parameters.
- Writes the updated configuration for each participant to a JSON file.
- Generates and writes a platform-specific script to start all participant nodes:
    - On Windows, it creates a PowerShell script that launches each node as a background
      process, redirects output and error streams to log files, and records process IDs.
    - On Unix-like systems, it creates a bash script that launches each node in the
      background, redirects output, and stores PIDs in a file.
- Sets executable permissions for the generated script.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If any error occurs during the script generation or file operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The generated script must be executed separately by the user to actually start the nodes.</li>
<li>Sleep intervals are added before starting nodes depending on their 'start' flag.</li>
<li>Logs and PIDs are stored under the configured directories for monitoring and management.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_nodes_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts participant nodes as independent background processes on the host machine.</span>

<span class="sd">    This method performs the following steps:</span>
<span class="sd">    - Updates each participant&#39;s configuration with paths for logs, config, certificates,</span>
<span class="sd">      and scenario parameters.</span>
<span class="sd">    - Writes the updated configuration for each participant to a JSON file.</span>
<span class="sd">    - Generates and writes a platform-specific script to start all participant nodes:</span>
<span class="sd">        - On Windows, it creates a PowerShell script that launches each node as a background</span>
<span class="sd">          process, redirects output and error streams to log files, and records process IDs.</span>
<span class="sd">        - On Unix-like systems, it creates a bash script that launches each node in the</span>
<span class="sd">          background, redirects output, and stores PIDs in a file.</span>
<span class="sd">    - Sets executable permissions for the generated script.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If any error occurs during the script generation or file operations.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - The generated script must be executed separately by the user to actually start the nodes.</span>
<span class="sd">        - Sleep intervals are added before starting nodes depending on their &#39;start&#39; flag.</span>
<span class="sd">        - Logs and PIDs are stored under the configured directories for monitoring and management.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processes_root_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting nodes as processes...&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;env path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">env_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Include additional config to the participants</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">):</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;log_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;logs&quot;</span><span class="p">)</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;tracking_args&quot;</span><span class="p">][</span><span class="s2">&quot;config_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="p">)</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;controller&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;scenario_args&quot;</span><span class="p">][</span><span class="s2">&quot;deployment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">deployment</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;certfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_cert.pem&quot;</span>
        <span class="p">)</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;keyfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">_key.pem&quot;</span>
        <span class="p">)</span>
        <span class="n">node</span><span class="p">[</span><span class="s2">&quot;security_args&quot;</span><span class="p">][</span><span class="s2">&quot;cafile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;certs&quot;</span><span class="p">,</span> <span class="s2">&quot;ca_cert.pem&quot;</span><span class="p">)</span>

        <span class="c1"># Write the config file in config directory</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host_platform</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
            <span class="n">commands</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            $ParentDir = Split-Path -Parent $PSScriptRoot</span>
<span class="s2">            $PID_FILE = &quot;$PSScriptRoot</span><span class="se">\\</span><span class="s2">current_scenario_pids.txt&quot;</span>
<span class="s2">            New-Item -Path $PID_FILE -Force -ItemType File</span>

<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">sorted_participants</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">],</span>
                <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">sorted_participants</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;Start-Sleep -Seconds 10</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;Start-Sleep -Seconds 2</span><span class="se">\n</span><span class="s2">&quot;</span>

                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;Write-Host &quot;Running node </span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">...&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;$OUT_FILE = &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s1">app</span><span class="se">\\</span><span class="s1">logs</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s1">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">.out&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;$ERROR_FILE = &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s1">app</span><span class="se">\\</span><span class="s1">logs</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s1">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">.err&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

                <span class="c1"># Use Start-Process for executing Python in background and capture PID</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;$process = Start-Process -FilePath &quot;python&quot; -ArgumentList &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s2">nebula</span><span class="se">\\</span><span class="s2">core</span><span class="se">\\</span><span class="s2">node.py </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="se">\\</span><span class="s2">app</span><span class="se">\\</span><span class="s2">config</span><span class="se">\\</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="se">\\</span><span class="s2">participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json&quot; -PassThru -NoNewWindow -RedirectStandardOutput $OUT_FILE -RedirectStandardError $ERROR_FILE</span>
<span class="s2">            Add-Content -Path $PID_FILE -Value $process.Id</span>
<span class="s2">            &quot;&quot;&quot;</span>

            <span class="n">commands</span> <span class="o">+=</span> <span class="s1">&#39;Write-Host &quot;All nodes started. PIDs stored in $PID_FILE&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.ps1&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">commands</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.ps1&quot;</span><span class="p">,</span> <span class="mo">0o755</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">commands</span> <span class="o">=</span> <span class="s1">&#39;#!/bin/bash</span><span class="se">\n\n</span><span class="s1">PID_FILE=&quot;$(dirname &quot;$0&quot;)/current_scenario_pids.txt&quot;</span><span class="se">\n\n</span><span class="s1">&gt; $PID_FILE</span><span class="se">\n\n</span><span class="s1">&#39;</span>
            <span class="n">sorted_participants</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">participants</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">],</span>
                <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">sorted_participants</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;start&quot;</span><span class="p">]:</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;sleep 10</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;sleep 2</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;echo &quot;Running node </span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;device_args&quot;</span><span class="p">][</span><span class="s2">&quot;idx&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">...&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;OUT_FILE=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/app/logs/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.out</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;python </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/nebula/core/node.py </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="si">}</span><span class="s2">/app/config/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">/participant_</span><span class="si">{</span><span class="n">node</span><span class="p">[</span><span class="s1">&#39;device_args&#39;</span><span class="p">][</span><span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.json &amp;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">commands</span> <span class="o">+=</span> <span class="s2">&quot;echo $! &gt;&gt; $PID_FILE</span><span class="se">\n\n</span><span class="s2">&quot;</span>

            <span class="n">commands</span> <span class="o">+=</span> <span class="s1">&#39;echo &quot;All nodes started. PIDs stored in $PID_FILE&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">commands</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="si">}</span><span class="s2">/current_scenario_commands.sh&quot;</span><span class="p">,</span> <span class="mo">0o755</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error starting nodes as processes: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.stop_nodes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_nodes</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#nebula.controller.scenarios.ScenarioManagement.stop_nodes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop all running NEBULA nodes.</p>
<p>This method logs the shutdown action and calls the stop_participants
method to remove all scenario command files, which signals nodes to stop.</p>


            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop_nodes</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stop all running NEBULA nodes.</span>

<span class="sd">    This method logs the shutdown action and calls the stop_participants</span>
<span class="sd">    method to remove all scenario command files, which signals nodes to stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Closing NEBULA nodes... Please wait&quot;</span><span class="p">)</span>
    <span class="n">ScenarioManagement</span><span class="o">.</span><span class="n">stop_participants</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nebula.controller.scenarios.ScenarioManagement.stop_participants" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_participants</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#nebula.controller.scenarios.ScenarioManagement.stop_participants" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Stop running participant nodes by removing the scenario command files.</p>
<p>This method deletes the 'current_scenario_commands.sh' (or '.ps1' on Windows)
file associated with a scenario. Removing this file signals the nodes to stop
by terminating their processes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>scenario_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the scenario to stop. If None,
all scenarios' command files will be removed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>If the environment variable NEBULA_CONFIG_DIR is not set, a default
  configuration directory path is used.</li>
<li>Supports both Linux/macOS ('.sh') and Windows ('.ps1') script files.</li>
<li>Any errors during file removal are logged with the traceback.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>nebula/controller/scenarios.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop_participants</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stop running participant nodes by removing the scenario command files.</span>

<span class="sd">    This method deletes the &#39;current_scenario_commands.sh&#39; (or &#39;.ps1&#39; on Windows)</span>
<span class="sd">    file associated with a scenario. Removing this file signals the nodes to stop</span>
<span class="sd">    by terminating their processes.</span>

<span class="sd">    Args:</span>
<span class="sd">        scenario_name (str, optional): The name of the scenario to stop. If None,</span>
<span class="sd">            all scenarios&#39; command files will be removed.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - If the environment variable NEBULA_CONFIG_DIR is not set, a default</span>
<span class="sd">          configuration directory path is used.</span>
<span class="sd">        - Supports both Linux/macOS (&#39;.sh&#39;) and Windows (&#39;.ps1&#39;) script files.</span>
<span class="sd">        - Any errors during file removal are logged with the traceback.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># When stopping the nodes, we need to remove the current_scenario_commands.sh file -&gt; it will cause the nodes to stop using PIDs</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">nebula_config_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_CONFIG_DIR&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nebula_config_dir</span><span class="p">:</span>
            <span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
            <span class="n">nebula_base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_dir</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">))</span>
            <span class="n">nebula_config_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_base_dir</span><span class="p">,</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NEBULA_CONFIG_DIR not found. Using default path: </span><span class="si">{</span><span class="n">nebula_config_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scenario_name</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_HOST_PLATFORM&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
                <span class="n">scenario_commands_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">nebula_config_dir</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">,</span> <span class="s2">&quot;current_scenario_commands.ps1&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scenario_commands_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">nebula_config_dir</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">,</span> <span class="s2">&quot;current_scenario_commands.sh&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">scenario_commands_file</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">scenario_commands_file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NEBULA_HOST_PLATFORM&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_config_dir</span><span class="p">,</span> <span class="s2">&quot;**/current_scenario_commands.ps1&quot;</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nebula_config_dir</span><span class="p">,</span> <span class="s2">&quot;**/current_scenario_commands.sh&quot;</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while removing current_scenario_commands.sh file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="July 2, 2025 15:09:55 UTC">July 2, 2025</span>
  </span>

    
    
    
    
  </aside>



  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Created by <a href="https://enriquetomasmb.com">Enrique Tomás Martínez Beltrán</a>, Alberto Huertas Celdrán, Alejandro Avilés Serrano, and Fernando Torres Vega - Source code (AGPL-3.0)
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/CyberDataLab/nebula" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/nebula-dfl" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:enriquetomas@um.es" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../js/toc.js"></script>
      
    
  </body>
</html>